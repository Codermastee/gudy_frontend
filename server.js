const express = require('express');
const cors = require('cors');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');
const axios = require('axios');
const { neon } = require('@neondatabase/serverless');
const { drizzle } = require('drizzle-orm/neon-http');
const { eq, and, desc } = require('drizzle-orm');
const { users, products, orders, cartItems } = require('./schema');
require('dotenv').config();

const app = express();
const PORT = process.env.PORT || 5000;
const JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key';
const GROQ_API_KEY = process.env.GROQ_API_KEY;

// Neon Connection
const sql = neon(process.env.DATABASE_URL);
const db = drizzle(sql);

app.use(cors());
app.use(express.json());

// Auth Middleware
const authenticateToken = async (req, res, next) => {
  try {
    const authHeader = req.headers['authorization'];
    const token = authHeader && authHeader.split(' ')[1];
    if (!token) return res.status(401).json({ message: 'Token required' });

    const decoded = jwt.verify(token, JWT_SECRET);
    const [user] = await db.select().from(users).where(eq(users.id, decoded.userId));
    if (!user) return res.status(401).json({ message: 'User not found' });
    req.user = user;
    next();
  } catch (error) {
    res.status(403).json({ message: 'Invalid token' });
  }
};

// ==================== EXPANDED MULTI-LANGUAGE SUPPORT ====================

const translations = {
  // ENGLISH
  en: {
    greeting: "Hello! ЁЯСЛ Welcome to GUDY! I'm here to help you with our premium jaggery products. How can I assist you today?",
    contact: {
      phone: '+91 9876543210',
      email: 'support@gudy.com',
      whatsapp: '+91 9876543210',
      hours: 'Monday to Saturday, 9 AM - 6 PM'
    },
    faqs: {
      shipping: 'We offer FREE shipping on all orders above тВ╣299. For orders below тВ╣299, standard shipping charges of тВ╣40 apply.',
      delivery: 'Delivery typically takes 3-7 business days depending on your location. Metro cities receive orders within 3-4 days.',
      cod: 'Yes! We accept Cash on Delivery (COD) for all orders. You can also pay online using UPI, cards, or net banking.',
      returns: 'We have a 7-day return policy. If you receive a damaged or defective product, contact us within 7 days for a replacement or refund.',
      storage: 'Store in a cool, dry place in an airtight container. Keep away from moisture to prevent hardening.',
      expiry: 'Our jaggery products have a shelf life of 12 months from the date of manufacturing when stored properly.',
      organic: 'Yes, our jaggery is made from 100% organic sugarcane grown without pesticides or chemicals.',
      bulk: 'Yes! For bulk orders above 50kg, please contact us for special pricing. WhatsApp: +91 9876543210'
    }
  },
  
  // HINDI - рд╣рд┐рдВрджреА
  hi: {
    greeting: "рдирдорд╕реНрддреЗ! ЁЯСЛ GUDY рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ! рдореИрдВ рдпрд╣рд╛рдБ рдЖрдкрдХреА рдкреНрд░реАрдорд┐рдпрдо рдЧреБрдбрд╝ рдЙрддреНрдкрд╛рджреЛрдВ рдореЗрдВ рд╕рд╣рд╛рдпрддрд╛ рдХреЗ рд▓рд┐рдП рд╣реВрдБред рдореИрдВ рдЖрдкрдХреА рдХреИрд╕реЗ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдБ?",
    contact: {
      phone: '+91 9876543210',
      email: 'support@gudy.com',
      whatsapp: '+91 9876543210',
      hours: 'рд╕реЛрдорд╡рд╛рд░ рд╕реЗ рд╢рдирд┐рд╡рд╛рд░, рд╕реБрдмрд╣ 9 рдмрдЬреЗ - рд╢рд╛рдо 6 рдмрдЬреЗ'
    },
    faqs: {
      shipping: 'тВ╣299 рд╕реЗ рдЕрдзрд┐рдХ рдХреЗ рд╕рднреА рдСрд░реНрдбрд░ рдкрд░ рдореБрдлреНрдд рд╢рд┐рдкрд┐рдВрдЧред тВ╣299 рд╕реЗ рдХрдо рдХреЗ рдСрд░реНрдбрд░ рдкрд░ тВ╣40 рд╢рд┐рдкрд┐рдВрдЧ рд╢реБрд▓реНрдХ рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред',
      delivery: 'рдбрд┐рд▓реАрд╡рд░реА рдореЗрдВ рдЖрдорддреМрд░ рдкрд░ рдЖрдкрдХреЗ рд╕реНрдерд╛рди рдХреЗ рдЖрдзрд╛рд░ рдкрд░ 3-7 рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рджрд┐рди рд▓рдЧрддреЗ рд╣реИрдВред рдореЗрдЯреНрд░реЛ рд╢рд╣рд░реЛрдВ рдореЗрдВ 3-4 рджрд┐рдиреЛрдВ рдореЗрдВ рдСрд░реНрдбрд░ рдорд┐рд▓рддрд╛ рд╣реИред',
      cod: 'рд╣рд╛рдВ! рд╣рдо рд╕рднреА рдСрд░реНрдбрд░ рдХреЗ рд▓рд┐рдП рдХреИрд╢ рдСрди рдбрд┐рд▓реАрд╡рд░реА (COD) рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддреЗ рд╣реИрдВред рдЖрдк UPI, рдХрд╛рд░реНрдб рдпрд╛ рдиреЗрдЯ рдмреИрдВрдХрд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдСрдирд▓рд╛рдЗрди рднреА рднреБрдЧрддрд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред',
      returns: 'рд╣рдорд╛рд░реЗ рдкрд╛рд╕ 7 рджрд┐рди рдХреА рд░рд┐рдЯрд░реНрди рдкреЙрд▓рд┐рд╕реА рд╣реИред рдпрджрд┐ рдЖрдкрдХреЛ рдХреНрд╖рддрд┐рдЧреНрд░рд╕реНрдд рдпрд╛ рджреЛрд╖рдкреВрд░реНрдг рдЙрддреНрдкрд╛рдж рдорд┐рд▓рддрд╛ рд╣реИ, рддреЛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдпрд╛ рд░рд┐рдлрдВрдб рдХреЗ рд▓рд┐рдП 7 рджрд┐рдиреЛрдВ рдХреЗ рднреАрддрд░ рд╣рдорд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВред',
      storage: 'рдПрдпрд░рдЯрд╛рдЗрдЯ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдардВрдбреА, рд╕реВрдЦреА рдЬрдЧрд╣ рдкрд░ рд╕реНрдЯреЛрд░ рдХрд░реЗрдВред рд╕рдЦреНрдд рд╣реЛрдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдирдореА рд╕реЗ рджреВрд░ рд░рдЦреЗрдВред',
      expiry: 'рд╣рдорд╛рд░реЗ рдЧреБрдбрд╝ рдЙрддреНрдкрд╛рджреЛрдВ рдХреА рд╢реЗрд▓реНрдл рд▓рд╛рдЗрдл рдирд┐рд░реНрдорд╛рдг рдХреА рддрд╛рд░реАрдЦ рд╕реЗ 12 рдорд╣реАрдиреЗ рд╣реИ рдЬрдм рдЙрдЪрд┐рдд рд░реВрдк рд╕реЗ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред',
      organic: 'рд╣рд╛рдВ, рд╣рдорд╛рд░рд╛ рдЧреБрдбрд╝ 100% рдЬреИрд╡рд┐рдХ рдЧрдиреНрдиреЗ рд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдмрд┐рдирд╛ рдХреАрдЯрдирд╛рд╢рдХреЛрдВ рдпрд╛ рд░рд╕рд╛рдпрдиреЛрдВ рдХреЗ рдЙрдЧрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред',
      bulk: 'рд╣рд╛рдВ! 50 рдХрд┐рд▓реЛ рд╕реЗ рдЕрдзрд┐рдХ рдХреЗ рдереЛрдХ рдСрд░реНрдбрд░ рдХреЗ рд▓рд┐рдП, рд╡рд┐рд╢реЗрд╖ рдореВрд▓реНрдп рдирд┐рд░реНрдзрд╛рд░рдг рдХреЗ рд▓рд┐рдП рдХреГрдкрдпрд╛ рд╣рдорд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВред WhatsApp: +91 9876543210'
    }
  },
  
  // TAMIL - родрооро┐ро┤рпН
  ta: {
    greeting: "ро╡рогроХрпНроХроорпН! ЁЯСЛ GUDY-роХрпНроХрпБ ро╡ро░ро╡рпЗро▒рпНроХро┐ро▒рпЛроорпН! роОроЩрпНроХро│рпН рокро┐ро░рпАрооро┐ропроорпН ро╡рпЖро▓рпНро▓роорпН рокрпКро░рпБроЯрпНроХро│ро┐ро▓рпН роЙроЩрпНроХро│рпБроХрпНроХрпБ роЙродро╡ роиро╛ройрпН роЗроЩрпНроХрпЗ роЗро░рпБроХрпНроХро┐ро▒рпЗройрпН. роиро╛ройрпН роОрокрпНрокроЯро┐ роЙродро╡ роорпБроЯро┐ропрпБроорпН?",
    contact: {
      phone: '+91 9876543210',
      email: 'support@gudy.com',
      whatsapp: '+91 9876543210',
      hours: 'родро┐роЩрпНроХро│рпН роорпБродро▓рпН роЪройро┐, роХро╛ро▓рпИ 9 роорогро┐ - рооро╛ро▓рпИ 6 роорогро┐'
    },
    faqs: {
      shipping: 'тВ╣299 роХрпНроХрпБ роорпЗро▓рпН роЕройрпИродрпНродрпБ роЖро░рпНроЯро░рпНроХро│рпБроХрпНроХрпБроорпН роЗро▓ро╡роЪ ро╖ро┐рокрпНрокро┐роЩрпН. тВ╣299 роХрпНроХрпБ роХрпБро▒рпИро╡ро╛рой роЖро░рпНроЯро░рпНроХро│рпБроХрпНроХрпБ тВ╣40 ро╖ро┐рокрпНрокро┐роЩрпН роХроЯрпНроЯрогроорпН рокрпКро░рпБроирпНродрпБроорпН.',
      delivery: 'роЙроЩрпНроХро│рпН роЗроЯродрпНродрпИрокрпН рокрпКро▒рпБродрпНродрпБ рокрпКродрпБро╡ро╛роХ роЯрпЖро▓ро┐ро╡ро░ро┐роХрпНроХрпБ 3-7 ро╡рогро┐роХ роиро╛роЯрпНроХро│рпН роЖроХрпБроорпН. роорпЖроЯрпНро░рпЛ роироХро░роЩрпНроХро│рпН 3-4 роиро╛роЯрпНроХро│ро┐ро▓рпН роЖро░рпНроЯро░рпНроХро│рпИрокрпН рокрпЖро▒рпБроХро┐ройрпНро▒рой.',
      cod: 'роЖроорпН! роЕройрпИродрпНродрпБ роЖро░рпНроЯро░рпНроХро│рпБроХрпНроХрпБроорпН роХрпЗро╖рпН роЖройрпН роЯрпЖро▓ро┐ро╡ро░ро┐ (COD) роПро▒рпНро▒рпБроХрпНроХрпКро│рпНроХро┐ро▒рпЛроорпН. UPI, роХро╛ро░рпНроЯрпБроХро│рпН роЕро▓рпНро▓родрпБ роирпЖроЯрпН рокрпЗроЩрпНроХро┐роЩрпН рокропройрпНрокроЯрпБродрпНродро┐ роЖройрпНро▓рпИройро┐ро▓рпН рокрогроорпН роЪрпЖро▓рпБродрпНродро▓ро╛роорпН.',
      returns: 'роОроЩрпНроХро│ро┐роЯроорпН 7 роиро╛ро│рпН родро┐ро░рпБроорпНрокрокрпН рокрпЖро▒рпБроорпН роХрпКро│рпНроХрпИ роЙро│рпНро│родрпБ. роЪрпЗродроороЯрпИроирпНрод роЕро▓рпНро▓родрпБ роХрпБро▒рпИрокро╛роЯрпБро│рпНро│ родропро╛ро░ро┐рокрпНрокрпБ роХро┐роЯрпИродрпНродро╛ро▓рпН, рооро╛ро▒рпНро▒рпБ роЕро▓рпНро▓родрпБ рокрогродрпНродро┐ро░рпБрокрпНрокро┐роХрпНроХрпБ 7 роиро╛роЯрпНроХро│рпБроХрпНроХрпБро│рпН роОроЩрпНроХро│рпИродрпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ро╡рпБроорпН.',
      storage: 'роХро╛ро▒рпНро▒рпБ рокрпБроХро╛род роХрпКро│рпНроХро▓ройро┐ро▓рпН роХрпБро│ро┐ро░рпНроирпНрод, ро╡ро▒рогрпНроЯ роЗроЯродрпНродро┐ро▓рпН роЪрпЗрооро┐роХрпНроХро╡рпБроорпН. роХроЯро┐ройрооро╛ро╡родрпИродрпН родроЯрпБроХрпНроХ роИро░рокрпНрокродродрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ ро╡ро┐ро▓роХро┐ ро╡рпИроХрпНроХро╡рпБроорпН.',
      expiry: 'роОроЩрпНроХро│рпН ро╡рпЖро▓рпНро▓роорпН рокрпКро░рпБроЯрпНроХро│рпН роЪро░ро┐ропро╛роХ роЪрпЗрооро┐родрпНродро╛ро▓рпН роЙро▒рпНрокродрпНродро┐ родрпЗродро┐ропро┐ро▓ро┐ро░рпБроирпНродрпБ 12 рооро╛родроЩрпНроХро│рпН роЖропрпБроЯрпНроХро╛ро▓роорпН роЙро│рпНро│рой.',
      organic: 'роЖроорпН, роОроЩрпНроХро│рпН ро╡рпЖро▓рпНро▓роорпН 100% роЗропро▒рпНроХрпИ роХро░рпБроорпНрокро┐ро▓рпН роЗро░рпБроирпНродрпБ родропро╛ро░ро┐роХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ, роЗродрпБ рокрпВроЪрпНроЪро┐роХрпНроХрпКро▓рпНро▓ро┐роХро│рпН роЕро▓рпНро▓родрпБ роЗро░роЪро╛ропройроЩрпНроХро│рпН роЗро▓рпНро▓ро╛рооро▓рпН ро╡ро│ро░рпНроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ.',
      bulk: 'роЖроорпН! 50 роХро┐ро▓рпЛро╡рпБроХрпНроХрпБ роорпЗро▓рпН роорпКродрпНрод роЖро░рпНроЯро░рпНроХро│рпБроХрпНроХрпБ, роЪро┐ро▒рокрпНрокрпБ ро╡ро┐ро▓рпИроХрпНроХрпБ роОроЩрпНроХро│рпИ родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ро╡рпБроорпН. WhatsApp: +91 9876543210'
    }
  },
  
  // TELUGU - р░др▒Жр░▓р▒Бр░Чр▒Б
  te: {
    greeting: "р░ир░ор░╕р▒Нр░Хр░╛р░░р░В! ЁЯСЛ GUDY р░Хр▒Б р░╕р▒Нр░╡р░╛р░Чр░др░В! р░ор░╛ р░кр▒Нр░░р▒Ар░ор░┐р░пр░В р░мр▒Жр░▓р▒Нр░▓р░В р░Йр░др▒Нр░кр░др▒Нр░др▒Бр░▓р░▓р▒Л р░ор▒Ар░Хр▒Б р░╕р░╣р░╛р░пр░В р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░ир▒Зр░ир▒Б р░Зр░Хр▒Нр░Хр░б р░Йр░ир▒Нр░ир░╛р░ир▒Б. р░ир▒Зр░ир▒Б р░Ор░▓р░╛ р░╕р░╣р░╛р░пр░В р░Ър▒Зр░пр░Чр░▓р░ир▒Б?",
    contact: {
      phone: '+91 9876543210',
      email: 'support@gudy.com',
      whatsapp: '+91 9876543210',
      hours: 'р░╕р▒Лр░ор░╡р░╛р░░р░В р░ир▒Бр░Вр░бр░┐ р░╢р░ир░┐р░╡р░╛р░░р░В, р░Йр░жр░пр░В 9 р░Чр░Вр░Яр░▓р▒Б - р░╕р░╛р░пр░Вр░др▒Нр░░р░В 6 р░Чр░Вр░Яр░▓р▒Б'
    },
    faqs: {
      shipping: 'тВ╣299 р░Хр░Вр░Яр▒З р░Ор░Хр▒Нр░Хр▒Бр░╡ р░Ер░ир▒Нр░ир░┐ р░Жр░░р▒Нр░бр░░р▒Нр░▓р░Хр▒Б р░Йр░Ър░┐р░д р░╖р░┐р░кр▒Нр░кр░┐р░Вр░Чр▒Н. тВ╣299 р░Хр░Вр░Яр▒З р░др░Хр▒Нр░Хр▒Бр░╡ р░Жр░░р▒Нр░бр░░р▒Нр░▓р░Хр▒Б тВ╣40 р░╖р░┐р░кр▒Нр░кр░┐р░Вр░Чр▒Н р░Ыр░╛р░░р▒Нр░Ьр▒Ар░▓р▒Б р░╡р░░р▒Нр░др░┐р░╕р▒Нр░др░╛р░пр░┐.',
      delivery: 'р░ор▒А р░╕р▒Нр░ер░╛р░ир░╛р░ир▒Нр░ир░┐ р░мр░Яр▒Нр░Яр░┐ р░бр▒Жр░▓р░┐р░╡р░░р▒Ар░Хр░┐ р░╕р░╛р░зр░╛р░░р░гр░Вр░Чр░╛ 3-7 р░╡р▒Нр░пр░╛р░кр░╛р░░ р░жр░┐р░ир░╛р░▓р▒Б р░кр░бр▒Бр░др▒Бр░Вр░жр░┐. р░ор▒Жр░Яр▒Нр░░р▒Л р░ир░Чр░░р░╛р░▓р▒Б 3-4 р░░р▒Лр░Ьр▒Бр░▓р▒Нр░▓р▒Л р░Жр░░р▒Нр░бр░░р▒Нр░▓р░ир▒Б р░Ер░Вр░жр▒Бр░Хр▒Бр░Вр░Яр░╛р░пр░┐.',
      cod: 'р░Ер░╡р▒Бр░ир▒Б! р░Ер░ир▒Нр░ир░┐ р░Жр░░р▒Нр░бр░░р▒Нр░▓р░Хр▒Б р░Хр▒Нр░пр░╛р░╖р▒Н р░Жр░ир▒Н р░бр▒Жр░▓р░┐р░╡р░░р▒А (COD) р░Ер░Вр░Чр▒Ар░Хр░░р░┐р░╕р▒Нр░др░╛р░ор▒Б. UPI, р░Хр░╛р░░р▒Нр░бр▒Бр░▓р▒Б р░▓р▒Зр░жр░╛ р░ир▒Жр░Яр▒Н р░мр▒Нр░пр░╛р░Вр░Хр░┐р░Вр░Чр▒Н р░Йр░кр░пр▒Лр░Чр░┐р░Вр░Ър░┐ р░Жр░ир▒Нр░▓р▒Ир░ир▒Нр░▓р▒Л р░Хр▒Вр░бр░╛ р░Ър▒Жр░▓р▒Нр░▓р░┐р░Вр░Ър░╡р░Ър▒Нр░Ър▒Б.',
      returns: 'р░ор░╛р░Хр▒Б 7 р░░р▒Лр░Ьр▒Бр░▓ р░░р░┐р░Яр░░р▒Нр░ир▒Н р░кр░╛р░▓р░╕р▒А р░Йр░Вр░жр░┐. р░ор▒Ар░Хр▒Б р░жр▒Жр░мр▒Нр░мр░др░┐р░ир▒Нр░и р░▓р▒Зр░жр░╛ р░▓р▒Лр░кр░нр▒Вр░пр░┐р░╖р▒Нр░Я р░Йр░др▒Нр░кр░др▒Нр░др░┐ р░▓р░нр░┐р░Вр░Ър░┐р░ир░Яр▒Нр░▓р░пр░┐р░др▒З, р░░р▒Ар░кр▒Нр░▓р▒Зр░╕р▒Нр░ор▒Жр░Вр░Яр▒Н р░▓р▒Зр░жр░╛ р░░р▒Ар░лр░Вр░бр▒Н р░Хр▒Лр░╕р░В 7 р░░р▒Лр░Ьр▒Бр░▓р▒Нр░▓р▒Л р░ор░ор▒Нр░ор░▓р▒Нр░ир░┐ р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░Вр░бр░┐.',
      storage: 'р░Чр░╛р░▓р░┐ р░Ър▒Кр░░р░мр░бр░ир░┐ р░Хр░Вр░Яр▒Ир░ир░░р▒Нр░▓р▒Л р░Ър░▓р▒Нр░▓р░ир░┐, р░кр▒Кр░бр░┐ р░кр▒Нр░░р░жр▒Зр░╢р░Вр░▓р▒Л р░ир░┐р░▓р▒Нр░╡ р░Ър▒Зр░пр░Вр░бр░┐. р░Чр░Яр▒Нр░Яр░┐р░кр░бр░Хр▒Бр░Вр░бр░╛ р░др▒Зр░о р░ир▒Бр░Вр░бр░┐ р░жр▒Вр░░р░Вр░Чр░╛ р░Йр░Вр░Ър░Вр░бр░┐.',
      expiry: 'р░ор░╛ р░мр▒Жр░▓р▒Нр░▓р░В р░Йр░др▒Нр░кр░др▒Нр░др▒Бр░▓р▒Б р░╕р░░р░┐р░Чр▒Нр░Чр░╛ р░ир░┐р░▓р▒Нр░╡ р░Ър▒Зр░╕р░┐р░ир░кр▒Нр░кр▒Бр░бр▒Б р░др░пр░╛р░░р▒А р░др▒Зр░жр▒А р░ир▒Бр░Вр░бр░┐ 12 р░ир▒Жр░▓р░▓ р░╖р▒Жр░▓р▒Нр░лр▒Н р░Ьр▒Ар░╡р░┐р░др░В р░Хр░▓р░┐р░Чр░┐ р░Йр░Вр░Яр░╛р░пр░┐.',
      organic: 'р░Ер░╡р▒Бр░ир▒Б, р░ор░╛ р░мр▒Жр░▓р▒Нр░▓р░В 100% р░╕р▒Зр░Вр░жр▒Нр░░р▒Ар░п р░Ър▒Жр░░р▒Бр░Хр▒Б р░ир▒Бр░Вр░бр░┐ р░др░пр░╛р░░р▒Б р░Ър▒Зр░пр░мр░бр░┐р░Вр░жр░┐, р░Зр░жр░┐ р░кр▒Бр░░р▒Бр░Чр▒Бр░ор░Вр░жр▒Бр░▓р▒Б р░▓р▒Зр░жр░╛ р░░р░╕р░╛р░пр░ир░╛р░▓р▒Б р░▓р▒Зр░Хр▒Бр░Вр░бр░╛ р░кр▒Жр░Вр░Ър░мр░бр▒Бр░др▒Бр░Вр░жр░┐.',
      bulk: 'р░Ер░╡р▒Бр░ир▒Б! 50 р░Хр░┐р░▓р▒Лр░▓ р░Хр░Вр░Яр▒З р░Ор░Хр▒Нр░Хр▒Бр░╡ р░мр░▓р▒Нр░Хр▒Н р░Жр░░р▒Нр░бр░░р▒Нр░▓ р░Хр▒Лр░╕р░В, р░кр▒Нр░░р░др▒Нр░пр▒Зр░Х р░зр░░ р░Хр▒Лр░╕р░В р░жр░пр░Ър▒Зр░╕р░┐ р░ор░ор▒Нр░ор░▓р▒Нр░ир░┐ р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░Вр░бр░┐. WhatsApp: +91 9876543210'
    }
  },
  
  // KANNADA - р▓Хр▓ир│Нр▓ир▓б
  kn: {
    greeting: "р▓ир▓ор▓╕р│Нр▓Хр▓╛р▓░! ЁЯСЛ GUDY р▓Чр│Ж р▓╕р│Нр▓╡р▓╛р▓Чр▓д! р▓ир▓ор│Нр▓о р▓кр│Нр▓░р│Ар▓ор▓┐р▓пр▓В р▓мр│Жр▓▓р│Нр▓▓р▓ж р▓Йр▓др│Нр▓кр▓ир│Нр▓ир▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓ир▓┐р▓ор▓Чр│Ж р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр▓▓р│Б р▓ир▓╛р▓ир│Б р▓Зр▓▓р│Нр▓▓р▓┐р▓жр│Нр▓жр│Зр▓ир│Ж. р▓ир▓╛р▓ир│Б р▓╣р│Зр▓Чр│Ж р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр▓мр▓╣р│Бр▓жр│Б?",
    contact: {
      phone: '+91 9876543210',
      email: 'support@gudy.com',
      whatsapp: '+91 9876543210',
      hours: 'р▓╕р│Лр▓ор▓╡р▓╛р▓░р▓жр▓┐р▓Вр▓ж р▓╢р▓ир▓┐р▓╡р▓╛р▓░р▓жр▓╡р▓░р│Жр▓Чр│Ж, р▓мр│Жр▓│р▓┐р▓Чр│Нр▓Чр│Ж 9 р▓░р▓┐р▓Вр▓ж р▓╕р▓Вр▓Ьр│Ж 6 р▓░р▓╡р▓░р│Жр▓Чр│Ж'
    },
    faqs: {
      shipping: 'тВ╣299 р▓Хр│Нр▓Хр▓┐р▓Вр▓д р▓╣р│Жр▓Ър│Нр▓Ър▓┐р▓и р▓Ор▓▓р│Нр▓▓р▓╛ р▓Жр▓░р│Нр▓бр▓░р│НтАМр▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓Йр▓Ър▓┐р▓д р▓╢р▓┐р▓кр│Нр▓кр▓┐р▓Вр▓Чр│Н. тВ╣299 р▓Хр│Нр▓Хр▓┐р▓Вр▓д р▓Хр▓бр▓┐р▓ор│Ж р▓Жр▓░р│Нр▓бр▓░р│НтАМр▓Чр▓│р▓┐р▓Чр│Ж тВ╣40 р▓╢р▓┐р▓кр│Нр▓кр▓┐р▓Вр▓Чр│Н р▓╢р│Бр▓▓р│Нр▓Х р▓Ер▓ир│Нр▓╡р▓пр▓╡р▓╛р▓Чр│Бр▓др│Нр▓др▓жр│Ж.',
      delivery: 'р▓ир▓┐р▓ор│Нр▓о р▓╕р│Нр▓ер▓│р▓╡р▓ир│Нр▓ир│Б р▓Ер▓╡р▓▓р▓Вр▓мр▓┐р▓╕р▓┐ р▓╡р▓┐р▓др▓░р▓гр│Жр▓Чр│Ж р▓╕р▓╛р▓ор▓╛р▓ир│Нр▓пр▓╡р▓╛р▓Чр▓┐ 3-7 р▓╡р│Нр▓пр▓╛р▓кр▓╛р▓░ р▓жр▓┐р▓ир▓Чр▓│р│Б р▓др│Жр▓Чр│Жр▓жр│Бр▓Хр│Кр▓│р│Нр▓│р│Бр▓др│Нр▓др▓жр│Ж. р▓ор│Жр▓Яр│Нр▓░р│Л р▓ир▓Чр▓░р▓Чр▓│р▓┐р▓Чр│Ж 3-4 р▓жр▓┐р▓ир▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓Жр▓░р│Нр▓бр▓░р│НтАМр▓Чр▓│р│Б р▓╕р▓┐р▓Чр│Бр▓др│Нр▓др▓╡р│Ж.',
      cod: 'р▓╣р│Мр▓жр│Б! р▓ир▓╛р▓╡р│Б р▓Ор▓▓р│Нр▓▓р▓╛ р▓Жр▓░р│Нр▓бр▓░р│НтАМр▓Чр▓│р▓┐р▓Чр│Ж р▓Хр│Нр▓пр▓╛р▓╢р│Н р▓Жр▓ир│Н р▓бр│Жр▓▓р▓┐р▓╡р▓░р▓┐ (COD) р▓Ер▓ир│Нр▓ир│Б р▓╕р│Нр▓╡р│Ар▓Хр▓░р▓┐р▓╕р│Бр▓др│Нр▓др│Зр▓╡р│Ж. UPI, р▓Хр▓╛р▓░р│Нр▓бр│НтАМр▓Чр▓│р│Б р▓Ер▓ер▓╡р▓╛ р▓ир│Жр▓Яр│Н р▓мр│Нр▓пр▓╛р▓Вр▓Хр▓┐р▓Вр▓Чр│Н р▓мр▓│р▓╕р▓┐р▓Хр│Кр▓Вр▓бр│Б р▓Жр▓ир│НтАМр▓▓р│Ир▓ир│НтАМр▓ир▓▓р│Нр▓▓р▓┐ р▓кр▓╛р▓╡р▓др▓┐р▓╕р▓мр▓╣р│Бр▓жр│Б.',
      returns: 'р▓ир▓ор▓Чр│Ж 7-р▓жр▓┐р▓ир▓ж р▓░р▓┐р▓Яр▓░р│Нр▓ир│Н р▓ир│Ар▓др▓┐ р▓Зр▓жр│Ж. р▓ир▓┐р▓ор▓Чр│Ж р▓╣р▓╛р▓ир▓┐р▓Чр│Кр▓│р▓Чр▓╛р▓ж р▓Ер▓ер▓╡р▓╛ р▓жр│Лр▓╖р▓кр│Вр▓░р▓┐р▓д р▓Йр▓др│Нр▓кр▓ир│Нр▓и р▓╕р▓┐р▓Хр│Нр▓Хр▓░р│Ж, р▓мр▓жр▓▓р▓┐ р▓Ер▓ер▓╡р▓╛ р▓ор▓░р│Бр▓кр▓╛р▓╡р▓др▓┐р▓Чр▓╛р▓Чр▓┐ 7 р▓жр▓┐р▓ир▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓ир▓ор│Нр▓ор▓ир│Нр▓ир│Б р▓╕р▓Вр▓кр▓░р│Нр▓Хр▓┐р▓╕р▓┐.',
      storage: 'р▓Чр▓╛р▓│р▓┐р▓пр▓╛р▓бр▓ж р▓кр▓╛р▓др│Нр▓░р│Жр▓пр▓▓р│Нр▓▓р▓┐ р▓др▓Вр▓кр▓╛р▓ж, р▓Тр▓г р▓╕р│Нр▓ер▓│р▓жр▓▓р│Нр▓▓р▓┐ р▓╕р▓Вр▓Чр│Нр▓░р▓╣р▓┐р▓╕р▓┐. р▓Чр▓Яр│Нр▓Яр▓┐р▓пр▓╛р▓Чр│Бр▓╡р│Бр▓жр▓ир│Нр▓ир│Б р▓др▓бр│Жр▓пр▓▓р│Б р▓др│Зр▓╡р▓╛р▓Вр▓╢р▓жр▓┐р▓Вр▓ж р▓жр│Вр▓░р▓╡р▓┐р▓░р▓┐р▓╕р▓┐.',
      expiry: 'р▓ир▓ор│Нр▓о р▓мр│Жр▓▓р│Нр▓▓р▓ж р▓Йр▓др│Нр▓кр▓ир│Нр▓ир▓Чр▓│р│Б р▓╕р▓░р▓┐р▓пр▓╛р▓Чр▓┐ р▓╕р▓Вр▓Чр│Нр▓░р▓╣р▓┐р▓╕р▓┐р▓жр▓╛р▓Ч р▓др▓пр▓╛р▓░р▓┐р▓Хр│Жр▓п р▓жр▓┐р▓ир▓╛р▓Вр▓Хр▓жр▓┐р▓Вр▓ж 12 р▓др▓┐р▓Вр▓Чр▓│ р▓╢р│Жр▓▓р│Нр▓лр│Н р▓▓р│Ир▓лр│Н р▓Ер▓ир│Нр▓ир│Б р▓╣р│Кр▓Вр▓жр▓┐р▓╡р│Ж.',
      organic: 'р▓╣р│Мр▓жр│Б, р▓ир▓ор│Нр▓о р▓мр│Жр▓▓р│Нр▓▓р▓╡р▓ир│Нр▓ир│Б 100% р▓╕р▓╛р▓╡р▓пр▓╡ р▓Хр▓мр│Нр▓мр▓┐р▓ир▓┐р▓Вр▓ж р▓др▓пр▓╛р▓░р▓┐р▓╕р▓▓р▓╛р▓Чр│Бр▓др│Нр▓др▓жр│Ж, р▓Ер▓жр▓ир│Нр▓ир│Б р▓Хр│Ар▓Яр▓ир▓╛р▓╢р▓Хр▓Чр▓│р│Б р▓Ер▓ер▓╡р▓╛ р▓░р▓╛р▓╕р▓╛р▓пр▓ир▓┐р▓Хр▓Чр▓│р▓┐р▓▓р│Нр▓▓р▓жр│Ж р▓мр│Жр▓│р│Жр▓╕р▓▓р▓╛р▓Чр│Бр▓др│Нр▓др▓жр│Ж.',
      bulk: 'р▓╣р│Мр▓жр│Б! 50 р▓Хр│Жр▓Ьр▓┐р▓Чр▓┐р▓Вр▓д р▓╣р│Жр▓Ър│Нр▓Ър▓┐р▓и р▓мр▓▓р│Нр▓Хр│Н р▓Жр▓░р│Нр▓бр▓░р│НтАМр▓Чр▓│р▓┐р▓Чр│Ж, р▓╡р▓┐р▓╢р│Зр▓╖ р▓мр│Жр▓▓р│Жр▓Чр▓╛р▓Чр▓┐ р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б р▓ир▓ор│Нр▓ор▓ир│Нр▓ир│Б р▓╕р▓Вр▓кр▓░р│Нр▓Хр▓┐р▓╕р▓┐. WhatsApp: +91 9876543210'
    }
  },
  
  // MALAYALAM - р┤ор┤▓р┤пр┤╛р┤│р┤В
  ml: {
    greeting: "р┤ир┤ор┤╕р╡Нр┤Хр┤╛р┤░р┤В! ЁЯСЛ GUDY-р┤пр┤┐р┤▓р╡Зр┤Хр╡Нр┤Хр╡Н р┤╕р╡Нр┤╡р┤╛р┤Чр┤др┤В! р┤Юр┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж р┤кр╡Нр┤░р╡Ар┤ор┤┐р┤пр┤В р┤╢р╡╝р┤Хр╡Нр┤Хр┤░ р┤Йр╡╜р┤кр╡Нр┤кр┤ир╡Нр┤ир┤Щр╡Нр┤Щр┤│р┤┐р╡╜ р┤ир┤┐р┤Щр╡Нр┤Щр┤│р╡Ж р┤╕р┤╣р┤╛р┤пр┤┐р┤Хр╡Нр┤Хр┤╛р╡╗ р┤Юр┤╛р╡╗ р┤Зр┤╡р┤┐р┤Яр╡Жр┤пр╡Бр┤гр╡Нр┤Яр╡Н. р┤Ор┤ир┤┐р┤Хр╡Нр┤Хр╡Н р┤Ор┤Щр╡Нр┤Щр┤ир╡Ж р┤╕р┤╣р┤╛р┤пр┤┐р┤Хр╡Нр┤Хр┤╛р┤В?",
    contact: {
      phone: '+91 9876543210',
      email: 'support@gudy.com',
      whatsapp: '+91 9876543210',
      hours: 'р┤др┤┐р┤Щр╡Нр┤Хр╡╛ р┤ор╡Бр┤др╡╜ р┤╢р┤ир┤┐ р┤╡р┤░р╡Ж, р┤░р┤╛р┤╡р┤┐р┤▓р╡Ж 9 р┤ор┤гр┤┐ р┤ор╡Бр┤др╡╜ р┤╡р╡Ир┤Хр╡Бр┤ир╡Нр┤ир╡Зр┤░р┤В 6 р┤ор┤гр┤┐ р┤╡р┤░р╡Ж'
    },
    faqs: {
      shipping: 'тВ╣299-р┤ир╡Н р┤ор╡Бр┤Хр┤│р┤┐р┤▓р╡Бр┤│р╡Нр┤│ р┤Ор┤▓р╡Нр┤▓р┤╛ р┤Ур╡╝р┤бр┤▒р╡Бр┤Хр╡╛р┤Хр╡Нр┤Хр╡Бр┤В р┤╕р╡Чр┤Ьр┤ир╡Нр┤п р┤╖р┤┐р┤кр╡Нр┤кр┤┐р┤Вр┤Чр╡Н. тВ╣299-р╡╜ р┤др┤╛р┤┤р╡Жр┤пр╡Бр┤│р╡Нр┤│ р┤Ур╡╝р┤бр┤▒р╡Бр┤Хр╡╛р┤Хр╡Нр┤Хр╡Н тВ╣40 р┤╖р┤┐р┤кр╡Нр┤кр┤┐р┤Вр┤Чр╡Н р┤Ър┤╛р╡╝р┤Ьр╡Н р┤мр┤╛р┤зр┤Хр┤ор┤╛р┤гр╡Н.',
      delivery: 'р┤ир┤┐р┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж р┤╕р╡Нр┤ер┤▓р┤др╡Нр┤др╡Ж р┤Жр┤╢р╡Нр┤░р┤пр┤┐р┤Ър╡Нр┤Ър╡Н р┤бр╡Жр┤▓р┤┐р┤╡р┤▒р┤┐р┤пр┤┐р╡╜ р┤╕р┤╛р┤зр┤╛р┤░р┤гр┤пр┤╛р┤пр┤┐ 3-7 р┤кр╡Нр┤░р┤╡р╡Гр┤др╡Нр┤др┤┐ р┤жр┤┐р┤╡р┤╕р┤Щр╡Нр┤Щр╡╛ р┤Ор┤Яр╡Бр┤Хр╡Нр┤Хр╡Бр┤В. р┤ор╡Жр┤Яр╡Нр┤░р╡Л р┤ир┤Чр┤░р┤Щр╡Нр┤Щр┤│р┤┐р╡╜ 3-4 р┤жр┤┐р┤╡р┤╕р┤Щр╡Нр┤Щр╡╛р┤Хр╡Нр┤Хр╡Бр┤│р╡Нр┤│р┤┐р╡╜ р┤Ур╡╝р┤бр┤▒р╡Бр┤Хр╡╛ р┤▓р┤нр┤┐р┤Хр╡Нр┤Хр╡Бр┤В.',
      cod: 'р┤Ер┤др╡Ж! р┤Ор┤▓р╡Нр┤▓р┤╛ р┤Ур╡╝р┤бр┤▒р╡Бр┤Хр╡╛р┤Хр╡Нр┤Хр╡Бр┤В р┤Юр┤Щр╡Нр┤Щр╡╛ р┤Хр╡Нр┤пр┤╛р┤╖р╡Н р┤Ур╡║ р┤бр╡Жр┤▓р┤┐р┤╡р┤▒р┤┐ (COD) р┤╕р╡Нр┤╡р╡Ар┤Хр┤░р┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б. UPI, р┤Хр┤╛р╡╝р┤бр╡Бр┤Хр╡╛, р┤Ер┤▓р╡Нр┤▓р╡Жр┤Щр╡Нр┤Хр┤┐р╡╜ р┤ир╡Жр┤▒р╡Нр┤▒р╡Н р┤мр┤╛р┤Щр╡Нр┤Хр┤┐р┤Вр┤Чр╡Н р┤Йр┤кр┤пр╡Лр┤Чр┤┐р┤Ър╡Нр┤Ър╡Н р┤Ур╡║р┤▓р╡Ир┤ир┤╛р┤пр┤┐ р┤кр┤гр┤ор┤Яр┤пр╡Нр┤Хр╡Нр┤Хр┤╛р┤В.',
      returns: 'р┤Юр┤Щр╡Нр┤Щр╡╛р┤Хр╡Нр┤Хр╡Н 7 р┤жр┤┐р┤╡р┤╕р┤др╡Нр┤др╡Ж р┤▒р┤┐р┤Яр╡Нр┤Яр╡Зр╡║ р┤кр╡Лр┤│р┤┐р┤╕р┤┐ р┤Йр┤гр╡Нр┤Яр╡Н. р┤Хр╡Зр┤Яр┤╛р┤пр┤др╡Л р┤╡р┤┐р┤Хр┤▓р┤ор┤╛р┤пр┤др╡Л р┤Жр┤п р┤Йр╡╜р┤кр╡Нр┤кр┤ир╡Нр┤ир┤В р┤▓р┤нр┤┐р┤Ър╡Нр┤Ър┤╛р╡╜, р┤ор┤╛р┤▒р╡Нр┤▒р┤┐р┤╕р╡Нр┤ер┤╛р┤кр┤ир┤др╡Нр┤др┤┐р┤ир╡Л р┤▒р╡Ар┤лр┤гр╡Нр┤Яр┤┐р┤ир╡Л 7 р┤жр┤┐р┤╡р┤╕р┤др╡Нр┤др┤┐р┤ир╡Бр┤│р╡Нр┤│р┤┐р╡╜ р┤Юр┤Щр╡Нр┤Щр┤│р╡Ж р┤мр┤ир╡Нр┤зр┤кр╡Нр┤кр╡Жр┤Яр╡Бр┤Х.',
      storage: 'р┤╡р┤╛р┤пр╡Бр┤Хр┤Яр┤Хр╡Нр┤Хр┤╛р┤др╡Нр┤д р┤кр┤╛р┤др╡Нр┤░р┤др╡Нр┤др┤┐р╡╜ р┤др┤гр╡Бр┤др╡Нр┤др┤др╡Бр┤В р┤╡р┤░р┤гр╡Нр┤Яр┤др╡Бр┤ор┤╛р┤п р┤╕р╡Нр┤ер┤▓р┤др╡Нр┤др╡Н р┤╕р╡Вр┤Хр╡Нр┤╖р┤┐р┤Хр╡Нр┤Хр╡Бр┤Х. р┤Хр┤ар┤┐р┤ир┤ор┤╛р┤Хр╡Бр┤ир╡Нр┤ир┤др╡Н р┤др┤Яр┤пр┤╛р╡╗ р┤Ир╡╝р┤кр╡Нр┤кр┤др╡Нр┤др┤┐р╡╜ р┤ир┤┐р┤ир╡Нр┤ир╡Н р┤Ер┤Хр┤▒р╡Нр┤▒р┤┐ р┤ир┤┐р╡╝р┤др╡Нр┤др╡Бр┤Х.',
      expiry: 'р┤╢р┤░р┤┐р┤пр┤╛р┤пр┤┐ р┤╕р╡Вр┤Хр╡Нр┤╖р┤┐р┤Ър╡Нр┤Ър┤╛р╡╜ р┤ир┤┐р╡╝р┤ор╡Нр┤ор┤╛р┤г р┤др╡Ар┤пр┤др┤┐ р┤ор╡Бр┤др╡╜ р┤Юр┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж р┤╢р╡╝р┤Хр╡Нр┤Хр┤░ р┤Йр╡╜р┤кр╡Нр┤кр┤ир╡Нр┤ир┤Щр╡Нр┤Щр╡╛р┤Хр╡Нр┤Хр╡Н 12 р┤ор┤╛р┤╕р┤др╡Нр┤др╡Ж р┤╖р╡Жр╡╜р┤лр╡Н р┤▓р╡Ир┤лр╡Н р┤Йр┤гр╡Нр┤Яр╡Н.',
      organic: 'р┤Ер┤др╡Ж, р┤Юр┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж р┤╢р╡╝р┤Хр╡Нр┤Хр┤░ 100% р┤Ьр╡Ир┤╡ р┤Хр┤░р┤┐р┤ор╡Нр┤кр┤┐р╡╜ р┤ир┤┐р┤ир╡Нр┤ир╡Н р┤ир┤┐р╡╝р┤ор╡Нр┤ор┤┐р┤Ър╡Нр┤Ър┤др┤╛р┤гр╡Н, р┤Зр┤др╡Н р┤Хр╡Ар┤Яр┤ир┤╛р┤╢р┤┐р┤ир┤┐р┤Хр┤│р╡Л р┤░р┤╛р┤╕р┤╡р┤╕р╡Нр┤др╡Бр┤Хр╡Нр┤Хр┤│р╡Л р┤Зр┤▓р╡Нр┤▓р┤╛р┤др╡Ж р┤╡р┤│р╡╝р┤др╡Нр┤др╡Бр┤ир╡Нр┤ир╡Б.',
      bulk: 'р┤Ер┤др╡Ж! 50 р┤Хр┤┐р┤▓р╡Лр┤пр┤┐р╡╜ р┤Хр╡Вр┤Яр╡Бр┤др┤▓р╡Бр┤│р╡Нр┤│ р┤мр╡╛р┤Хр╡Нр┤Хр╡Н р┤Ур╡╝р┤бр┤▒р╡Бр┤Хр╡╛р┤Хр╡Нр┤Хр╡Н, р┤кр╡Нр┤░р┤др╡Нр┤пр╡Зр┤Х р┤╡р┤┐р┤▓р┤ир┤┐р╡╝р┤гр╡Нр┤гр┤пр┤др╡Нр┤др┤┐р┤ир┤╛р┤пр┤┐ р┤Юр┤Щр╡Нр┤Щр┤│р╡Ж р┤мр┤ир╡Нр┤зр┤кр╡Нр┤кр╡Жр┤Яр╡Бр┤Х. WhatsApp: +91 9876543210'
    }
  },
  
  // Add other languages...
  mr: {
    greeting: "рдирдорд╕реНрдХрд╛рд░! ЁЯСЛ GUDY рдордзреНрдпреЗ рдЖрдкрд▓реЗ рд╕реНрд╡рд╛рдЧрдд рдЖрд╣реЗ! рдЖрдордЪреНрдпрд╛ рдкреНрд░реАрдорд┐рдпрдо рдЧреВрд│ рдЙрддреНрдкрд╛рджрдирд╛рдВрдордзреНрдпреЗ рддреБрдореНрд╣рд╛рд▓рд╛ рдорджрдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдореА рдпреЗрдереЗ рдЖрд╣реЗ. рдореА рдХрд╢реА рдорджрдд рдХрд░реВ рд╢рдХрддреЛ?",
    contact: { phone: '+91 9876543210', email: 'support@gudy.com', whatsapp: '+91 9876543210', hours: 'рд╕реЛрдорд╡рд╛рд░ рддреЗ рд╢рдирд┐рд╡рд╛рд░, рд╕рдХрд╛рд│реА 9 рддреЗ рд╕рдВрдзреНрдпрд╛рдХрд╛рд│реА 6' },
    faqs: {
      shipping: 'тВ╣299 рдкреЗрдХреНрд╖рд╛ рдЬрд╛рд╕реНрдд рдСрд░реНрдбрд░рд╡рд░ рдореЛрдлрдд рд╢рд┐рдкрд┐рдВрдЧ. тВ╣299 рдкреЗрдХреНрд╖рд╛ рдХрдореА рдСрд░реНрдбрд░рд╕рд╛рдареА тВ╣40 рд╢рд┐рдкрд┐рдВрдЧ рд╢реБрд▓реНрдХ рд▓рд╛рдЧреВ.',
      delivery: 'рддреБрдордЪреНрдпрд╛ рд╕реНрдерд╛рдирд╛рдиреБрд╕рд╛рд░ рдбрд┐рд▓рд┐рд╡реНрд╣рд░реАрд▓рд╛ рд╕рд╛рдзрд╛рд░рдгрдкрдгреЗ 3-7 рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рджрд┐рд╡рд╕ рд▓рд╛рдЧрддрд╛рдд.',
      cod: 'рд╣реЛрдп! рдЖрдореНрд╣реА рд╕рд░реНрд╡ рдСрд░реНрдбрд░рд╕рд╛рдареА рдХреЕрд╢ рдСрди рдбрд┐рд▓рд┐рд╡реНрд╣рд░реА (COD) рд╕реНрд╡реАрдХрд╛рд░рддреЛ.',
      returns: '7-рджрд┐рд╡рд╕рд╛рдВрдЪреА рдкрд░рддрд╛рд╡рд╛ рдзреЛрд░рдг рдЖрд╣реЗ.',
      storage: 'рдердВрдб, рдХреЛрд░рдбреНрдпрд╛ рдард┐рдХрд╛рдгреА рдПрдЕрд░рдЯрд╛рдЗрдЯ рдХрдВрдЯреЗрдирд░рдордзреНрдпреЗ рд╕рд╛рдард╡рд╛.',
      expiry: 'рдпреЛрдЧреНрдпрд░рд┐рддреНрдпрд╛ рд╕рд╛рдард╡рд▓реНрдпрд╛рд╕ рдирд┐рд░реНрдорд┐рддреАрдЪреНрдпрд╛ рддрд╛рд░рдЦреЗрдкрд╛рд╕реВрди 12 рдорд╣рд┐рдиреЗ рд╢реЗрд▓реНрдл рд▓рд╛рдЗрдл.',
      organic: 'рд╣реЛрдп, рдЖрдордЪреЗ рдЧреВрд│ 100% рд╕реЗрдВрджреНрд░рд┐рдп рдКрд╕рд╛рдкрд╛рд╕реВрди рдмрдирд╡рд▓реЗ рдЬрд╛рддреЗ.',
      bulk: 'рд╣реЛрдп! 50 рдХрд┐рд▓реЛ рдкреЗрдХреНрд╖рд╛ рдЬрд╛рд╕реНрдд рдСрд░реНрдбрд░рд╕рд╛рдареА рдЖрдордЪреНрдпрд╛рд╢реА рд╕рдВрдкрд░реНрдХ рд╕рд╛рдзрд╛. WhatsApp: +91 9876543210'
    }
  },
  
  bn: {
    greeting: "ржиржорж╕рзНржХрж╛рж░! ЁЯСЛ GUDY-рждрзЗ рж╕рзНржмрж╛ржЧрждржо! ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржЧрзБржбрж╝ ржкржгрзНржпржЧрзБрж▓рж┐рждрзЗ ржЖржкржирж╛ржХрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржЖржорж┐ ржПржЦрж╛ржирзЗ ржЖржЫрж┐ред ржЖржорж┐ ржХрзАржнрж╛ржмрзЗ рж╕рж╣рж╛ржпрж╝рждрж╛ ржХрж░рждрзЗ ржкрж╛рж░рж┐?",
    contact: { phone: '+91 9876543210', email: 'support@gudy.com', whatsapp: '+91 9876543210', hours: 'рж╕рзЛржоржмрж╛рж░ ржерзЗржХрзЗ рж╢ржирж┐ржмрж╛рж░, рж╕ржХрж╛рж▓ 9ржЯрж╛ ржерзЗржХрзЗ рж╕ржирзНржзрзНржпрж╛ 6ржЯрж╛' },
    faqs: {
      shipping: 'тВ╣299-ржПрж░ ржЙржкрж░рзЗ рж╕ржорж╕рзНржд ржЕрж░рзНржбрж╛рж░рзЗ ржмрж┐ржирж╛ржорзВрж▓рзНржпрзЗ рж╢рж┐ржкрж┐ржВред тВ╣299-ржПрж░ ржирзАржЪрзЗ ржЕрж░рзНржбрж╛рж░рзЗрж░ ржЬржирзНржп тВ╣40 рж╢рж┐ржкрж┐ржВ ржЪрж╛рж░рзНржЬ ржкрзНрж░ржпрзЛржЬрзНржпред',
      delivery: 'ржЖржкржирж╛рж░ ржЕржмрж╕рзНржерж╛ржирзЗрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ ржбрзЗрж▓рж┐ржнрж╛рж░рж┐рждрзЗ рж╕рж╛ржзрж╛рж░ржгржд 3-7 ржХрж╛рж░рзНржпржжрж┐ржмрж╕ рж╕ржоржпрж╝ рж▓рж╛ржЧрзЗред',
      cod: 'рж╣рзНржпрж╛ржБ! ржЖржорж░рж╛ рж╕ржорж╕рзНржд ржЕрж░рзНржбрж╛рж░рзЗрж░ ржЬржирзНржп ржХрзНржпрж╛рж╢ ржЕржи ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ (COD) ржЧрзНрж░рж╣ржг ржХрж░рж┐ред',
      returns: 'ржЖржорж╛ржжрзЗрж░ 7-ржжрж┐ржирзЗрж░ рж░рж┐ржЯрж╛рж░рзНржи ржирзАрждрж┐ ржЖржЫрзЗред',
      storage: 'ржПржХржЯрж┐ ржмрж╛ржпрж╝рзБрж░рзЛржзрзА ржкрж╛рждрзНрж░рзЗ рж╢рзАрждрж▓, рж╢рзБрж╖рзНржХ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржиред',
      expiry: 'ржпржерж╛ржпржержнрж╛ржмрзЗ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж▓рзЗ ржЙрзОржкрж╛ржжржирзЗрж░ рждрж╛рж░рж┐ржЦ ржерзЗржХрзЗ 12 ржорж╛рж╕рзЗрж░ рж╢рзЗрж▓ржл рж▓рж╛ржЗржлред',
      organic: 'рж╣рзНржпрж╛ржБ, ржЖржорж╛ржжрзЗрж░ ржЧрзБржбрж╝ 100% ржЬрзИржм ржЖржЦ ржерзЗржХрзЗ рждрзИрж░рж┐ред',
      bulk: 'рж╣рзНржпрж╛ржБ! 50 ржХрзЗржЬрж┐рж░ ржмрзЗрж╢рж┐ ржмрж╛рж▓рзНржХ ржЕрж░рзНржбрж╛рж░рзЗрж░ ржЬржирзНржп ржЖржорж╛ржжрзЗрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рзБржиред WhatsApp: +91 9876543210'
    }
  },
  
  gu: {
    greeting: "ркиркорк╕рлНркдрлЗ! ЁЯСЛ GUDY ркорк╛ркВ ркЖрккркирлБркВ рк╕рлНрк╡рк╛ркЧркд ркЫрлЗ! ркЕркорк╛рк░рк╛ рккрлНрк░рлАркорк┐ркпрко ркЧрлЛрк│ ркЙркдрлНрккрк╛ркжркирлЛркорк╛ркВ ркдркоркирлЗ ркоркжркж ркХрк░рк╡рк╛ рк╣рлБркВ ркЕрк╣рлАркВ ркЫрлБркВ. рк╣рлБркВ ркХрлЗрк╡рлА рк░рлАркдрлЗ ркоркжркж ркХрк░рлА рк╢ркХрлБркВ?",
    contact: { phone: '+91 9876543210', email: 'support@gudy.com', whatsapp: '+91 9876543210', hours: 'рк╕рлЛркорк╡рк╛рк░ркерлА рк╢ркирк┐рк╡рк╛рк░, рк╕рк╡рк╛рк░рлЗ 9 ркерлА рк╕рк╛ркВркЬрлЗ 6' },
    faqs: {
      shipping: 'тВ╣299 ркерлА рк╡ркзрлБркирк╛ ркдркорк╛рко ркУрк░рлНркбрк░ рккрк░ ркорклркд рк╢рк┐рккрк┐ркВркЧред тВ╣299 ркерлА ркУркЫрк╛ ркУрк░рлНркбрк░ ркорк╛ркЯрлЗ тВ╣40 рк╢рк┐рккрк┐ркВркЧ ркЪрк╛рк░рлНркЬ рк▓рк╛ркЧрлБ рккркбрлЗ ркЫрлЗред',
      delivery: 'ркдркорк╛рк░рк╛ рк╕рлНркерк╛рки рккрк░ ркЖркзрк╛рк░ рк░рк╛ркЦрлАркирлЗ ркбрк┐рк▓рк┐рк╡рк░рлАркорк╛ркВ рк╕рк╛ркорк╛ркирлНркп рк░рлАркдрлЗ 3-7 рк╡рлНркпрк╛рк╡рк╕рк╛ркпрк┐ркХ ркжрк┐рк╡рк╕ рк▓рк╛ркЧрлЗ ркЫрлЗред',
      cod: 'рк╣рк╛! ркЕркорлЗ ркдркорк╛рко ркУрк░рлНркбрк░ ркорк╛ркЯрлЗ ркХрлЗрк╢ ркУрки ркбрк┐рк▓рк┐рк╡рк░рлА (COD) рк╕рлНрк╡рлАркХрк╛рк░рлАркП ркЫрлАркПред',
      returns: 'ркЕркорк╛рк░рлА рккрк╛рк╕рлЗ 7-ркжрк┐рк╡рк╕ркирлА рк░рк┐ркЯрк░рлНрки рккрлЛрк▓рк┐рк╕рлА ркЫрлЗред',
      storage: 'ркПрк░ркЯрк╛ркЗркЯ ркХркирлНркЯрлЗркирк░ркорк╛ркВ ркаркВркбрлА, рк╕рлВркХрлА ркЬркЧрлНркпрк╛ркП рк╕ркВркЧрлНрк░рк╣рк┐ркд ркХрк░рлЛред',
      expiry: 'ркпрлЛркЧрлНркп рк░рлАркдрлЗ рк╕ркВркЧрлНрк░рк╣рк┐ркд ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлЗ ркдрлЛ ркЙркдрлНрккрк╛ркжркиркирлА ркдрк╛рк░рлАркЦркерлА 12 ркорк╣рк┐ркирк╛ркирлА рк╢рлЗрк▓рлНркл рк▓рк╛ркЗрклред',
      organic: 'рк╣рк╛, ркЕркорк╛рк░рлЛ ркЧрлЛрк│ 100% ркУрк░рлНркЧрлЗркирк┐ркХ рк╢рлЗрк░ркбрлАркорк╛ркВркерлА ркмркирк╛рк╡рк╡рк╛ркорк╛ркВ ркЖрк╡рлЗ ркЫрлЗред',
      bulk: 'рк╣рк╛! 50 ркХрк┐рк▓рлЛркерлА рк╡ркзрлБ ркмрк▓рлНркХ ркУрк░рлНркбрк░ ркорк╛ркЯрлЗ ркХрлГрккрк╛ ркХрк░рлАркирлЗ ркЕркорк╛рк░рлЛ рк╕ркВрккрк░рлНркХ ркХрк░рлЛред WhatsApp: +91 9876543210'
    }
  },
  
  pa: {
    greeting: "ри╕рид ри╕рйНри░рйА риЕриХри╛ри▓! ЁЯСЛ GUDY ри╡ри┐рй▒риЪ ридрйБри╣ри╛рибри╛ ри╕рйБриЖриЧрид ри╣рйИ! ри╕ри╛рибрйЗ рикрйНри░рйАриорйАриЕрио риЧрйБрйЬ риЙридрикри╛рижри╛риВ ри╡ри┐рй▒риЪ ридрйБри╣ри╛рибрйА риорижриж риХри░рии ри▓риИ риорйИриВ риЗрй▒риерйЗ ри╣ри╛риВред риорйИриВ риХри┐ри╡рйЗриВ риорижриж риХри░ ри╕риХрижри╛ ри╣ри╛риВ?",
    contact: { phone: '+91 9876543210', email: 'support@gudy.com', whatsapp: '+91 9876543210', hours: 'ри╕рйЛриори╡ри╛ри░ ридрйЛриВ ри╕ри╝риирйАри╡ри╛ри░, ри╕ри╡рйЗри░рйЗ 9 ридрйЛриВ ри╕ри╝ри╛рио 6' },
    faqs: {
      shipping: 'тВ╣299 ридрйЛриВ ри╡рй▒риз рижрйЗ ри╕ри╛ри░рйЗ риЖри░рибри░ри╛риВ ридрйЗ риорйБрилри╝рид ри╕ри╝ри┐рикри┐рй░риЧред тВ╣299 ридрйЛриВ риШрй▒риЯ риЖри░рибри░ри╛риВ ри▓риИ тВ╣40 ри╕ри╝ри┐рикри┐рй░риЧ риЦри░риЪрйЗ ри▓ри╛риЧрйВ ри╣рйБрй░рижрйЗ ри╣рииред',
      delivery: 'ридрйБри╣ри╛рибрйА ри╕риери┐ридрйА рижрйЗ риЖризри╛ри░ ридрйЗ рибри┐ри▓рйАри╡ри░рйА ри╡ри┐рй▒риЪ риЖрио ридрйМри░ ридрйЗ 3-7 риХри╛ри░рйЛримри╛ри░рйА рижри┐рии ри▓рй▒риЧрижрйЗ ри╣рииред',
      cod: 'ри╣ри╛риВ! риЕри╕рйАриВ ри╕ри╛ри░рйЗ риЖри░рибри░ри╛риВ ри▓риИ риХрйИри╕ри╝ риЖрии рибри┐ри▓рйАри╡ри░рйА (COD) ри╕ри╡рйАриХри╛ри░ риХри░рижрйЗ ри╣ри╛риВред',
      returns: 'ри╕ри╛рибрйА 7-рижри┐рии рижрйА ри╡ри╛рикри╕рйА риирйАридрйА ри╣рйИред',
      storage: 'риПриЕри░риЯри╛риИриЯ риХрй░риЯрйЗриири░ ри╡ри┐рй▒риЪ риарй░рибрйА, ри╕рйБрй▒риХрйА риери╛риВ ридрйЗ ри╕риЯрйЛри░ риХри░рйЛред',
      expiry: 'ри╕ри╣рйА риврй░риЧ риири╛ри▓ ри╕риЯрйЛри░ риХрйАридрйЗ риЬри╛риг ридрйЗ риири┐ри░риори╛риг риори┐ридрйА ридрйЛриВ 12 риори╣рйАриири┐риЖриВ рижрйА ри╕ри╝рйИри▓рил ри▓ри╛риИрилред',
      organic: 'ри╣ри╛риВ, ри╕ри╛рибри╛ риЧрйБрйЬ 100% риЬрйИри╡ри┐риХ риЧрй░риирйЗ ридрйЛриВ римригри╛риЗриЖ риЧри┐риЖ ри╣рйИред',
      bulk: 'ри╣ри╛риВ! 50 риХри┐ри▓рйЛ ридрйЛриВ ри╡рй▒риз рижрйЗ римри▓риХ риЖри░рибри░ри╛риВ ри▓риИ, риХри┐ри░рикри╛ риХри░риХрйЗ ри╕ри╛рибрйЗ риири╛ри▓ ри╕рй░рикри░риХ риХри░рйЛред WhatsApp: +91 9876543210'
    }
  },
  
  // International languages
  es: {
    greeting: "┬бHola! ЁЯСЛ ┬бBienvenido a GUDY! Estoy aqu├н para ayudarte con nuestros productos premium de jaggery. ┬┐C├│mo puedo asistirte hoy?",
    contact: { phone: '+91 9876543210', email: 'support@gudy.com', whatsapp: '+91 9876543210', hours: 'Lunes a S├бbado, 9 AM - 6 PM' },
    faqs: {
      shipping: 'Ofrecemos env├нo GRATIS en todos los pedidos superiores a тВ╣299. Para pedidos inferiores a тВ╣299, se aplican cargos de env├нo est├бndar de тВ╣40.',
      delivery: 'La entrega generalmente toma de 3 a 7 d├нas h├бbiles dependiendo de tu ubicaci├│n.',
      cod: '┬бS├н! Aceptamos Pago Contra Entrega (COD) para todos los pedidos.',
      returns: 'Tenemos una pol├нtica de devoluci├│n de 7 d├нas.',
      storage: 'Almacenar en un lugar fresco y seco en un recipiente herm├йtico.',
      expiry: 'Nuestros productos tienen una vida ├║til de 12 meses desde la fecha de fabricaci├│n cuando se almacenan correctamente.',
      organic: 'S├н, nuestro jaggery est├б hecho de ca├▒a de az├║car 100% org├бnica.',
      bulk: '┬бS├н! Para pedidos al por mayor de m├бs de 50 kg, cont├бctanos. WhatsApp: +91 9876543210'
    }
  },
  
  fr: {
    greeting: "Bonjour! ЁЯСЛ Bienvenue chez GUDY! Je suis l├а pour vous aider avec nos produits premium de jaggery. Comment puis-je vous aider aujourd'hui?",
    contact: { phone: '+91 9876543210', email: 'support@gudy.com', whatsapp: '+91 9876543210', hours: 'Lundi au Samedi, 9h - 18h' },
    faqs: {
      shipping: 'Nous offrons la livraison GRATUITE sur toutes les commandes sup├йrieures ├а тВ╣299. Pour les commandes inf├йrieures ├а тВ╣299, des frais de livraison standard de тВ╣40 s\'appliquent.',
      delivery: 'La livraison prend g├йn├йralement 3 ├а 7 jours ouvrables selon votre emplacement.',
      cod: 'Oui! Nous acceptons le paiement ├а la livraison (COD) pour toutes les commandes.',
      returns: 'Nous avons une politique de retour de 7 jours.',
      storage: 'Conserver dans un endroit frais et sec dans un r├йcipient herm├йtique.',
      expiry: 'Nos produits ont une dur├йe de conservation de 12 mois ├а partir de la date de fabrication lorsqu\'ils sont stock├йs correctement.',
      organic: 'Oui, notre jaggery est fabriqu├й ├а partir de canne ├а sucre 100% biologique.',
      bulk: 'Oui! Pour les commandes en gros de plus de 50 kg, veuillez nous contacter. WhatsApp: +91 9876543210'
    }
  },
  
  de: {
    greeting: "Hallo! ЁЯСЛ Willkommen bei GUDY! Ich bin hier, um Ihnen bei unseren Premium-Jaggery-Produkten zu helfen. Wie kann ich Ihnen heute helfen?",
    contact: { phone: '+91 9876543210', email: 'support@gudy.com', whatsapp: '+91 9876543210', hours: 'Montag bis Samstag, 9 - 18 Uhr' },
    faqs: {
      shipping: 'Wir bieten KOSTENLOSEN Versand f├╝r alle Bestellungen ├╝ber тВ╣299. F├╝r Bestellungen unter тВ╣299 fallen Standardversandkosten von тВ╣40 an.',
      delivery: 'Die Lieferung dauert in der Regel 3-7 Werktage, abh├дngig von Ihrem Standort.',
      cod: 'Ja! Wir akzeptieren Nachnahme (COD) f├╝r alle Bestellungen.',
      returns: 'Wir haben eine 7-t├дgige R├╝ckgaberichtlinie.',
      storage: 'An einem k├╝hlen, trockenen Ort in einem luftdichten Beh├дlter aufbewahren.',
      expiry: 'Unsere Produkte haben eine Haltbarkeit von 12 Monaten ab Herstellungsdatum bei ordnungsgem├д├Яer Lagerung.',
      organic: 'Ja, unser Jaggery wird aus 100% biologischem Zuckerrohr hergestellt.',
      bulk: 'Ja! F├╝r Gro├Яbestellungen ├╝ber 50 kg kontaktieren Sie uns bitte. WhatsApp: +91 9876543210'
    }
  },
  
  ar: {
    greeting: "┘Е╪▒╪н╪и╪з┘Л! ЁЯСЛ ┘Е╪▒╪н╪и╪з┘Л ╪и┘Г ┘Б┘К GUDY! ╪г┘Ж╪з ┘З┘Ж╪з ┘Д┘Е╪│╪з╪╣╪п╪к┘Г ┘Б┘К ┘Е┘Ж╪к╪м╪з╪к┘Ж╪з ╪з┘Д┘Е╪к┘Е┘К╪▓╪й ┘Е┘Ж ╪з┘Д╪м╪з╪║╪▒┘К. ┘Г┘К┘Б ┘К┘Е┘Г┘Ж┘Ж┘К ┘Е╪│╪з╪╣╪п╪к┘Г ╪з┘Д┘К┘И┘Е╪Я",
    contact: { phone: '+91 9876543210', email: 'support@gudy.com', whatsapp: '+91 9876543210', hours: '╪з┘Д╪е╪л┘Ж┘К┘Ж ╪е┘Д┘Й ╪з┘Д╪│╪и╪к╪М 9 ╪╡╪и╪з╪н╪з┘Л - 6 ┘Е╪│╪з╪б┘Л' },
    faqs: {
      shipping: '┘Ж┘В╪п┘Е ╪┤╪н┘Ж ┘Е╪м╪з┘Ж┘К ╪╣┘Д┘Й ╪м┘Е┘К╪╣ ╪з┘Д╪╖┘Д╪и╪з╪к ╪з┘Д╪к┘К ╪к╪▓┘К╪п ╪╣┘Ж тВ╣299. ┘Д┘Д╪╖┘Д╪и╪з╪к ╪з┘Д╪к┘К ╪к┘В┘Д ╪╣┘Ж тВ╣299╪М ╪к╪╖╪и┘В ╪▒╪│┘И┘Е ╪┤╪н┘Ж ┘В┘К╪з╪│┘К╪й ┘В╪п╪▒┘З╪з тВ╣40.',
      delivery: '╪╣╪з╪п╪й ┘Е╪з ┘К╪│╪к╪║╪▒┘В ╪з┘Д╪к╪│┘Д┘К┘Е ┘Е┘Ж 3 ╪е┘Д┘Й 7 ╪г┘К╪з┘Е ╪╣┘Е┘Д ╪н╪│╪и ┘Е┘И┘В╪╣┘Г.',
      cod: '┘Ж╪╣┘Е! ┘Ж┘В╪и┘Д ╪з┘Д╪п┘Б╪╣ ╪╣┘Ж╪п ╪з┘Д╪з╪│╪к┘Д╪з┘Е (COD) ┘Д╪м┘Е┘К╪╣ ╪з┘Д╪╖┘Д╪и╪з╪к.',
      returns: '┘Д╪п┘К┘Ж╪з ╪│┘К╪з╪│╪й ╪е╪▒╪м╪з╪╣ ┘Д┘Е╪п╪й 7 ╪г┘К╪з┘Е.',
      storage: '╪з┘Д╪к╪о╪▓┘К┘Ж ┘Б┘К ┘Е┘Г╪з┘Ж ╪и╪з╪▒╪п ┘И╪м╪з┘Б ┘Б┘К ╪н╪з┘И┘К╪й ┘Е╪н┘Г┘Е╪й ╪з┘Д╪е╪║┘Д╪з┘В.',
      expiry: '┘Е┘Ж╪к╪м╪з╪к┘Ж╪з ┘Д┘З╪з ╪╣┘Е╪▒ ╪к╪о╪▓┘К┘Ж ┘Е╪п╪к┘З 12 ╪┤┘З╪▒╪з┘Л ┘Е┘Ж ╪к╪з╪▒┘К╪о ╪з┘Д╪к╪╡┘Ж┘К╪╣ ╪╣┘Ж╪п ╪з┘Д╪к╪о╪▓┘К┘Ж ╪и╪┤┘Г┘Д ╪╡╪н┘К╪н.',
      organic: '┘Ж╪╣┘Е╪М ┘К┘П╪╡┘Ж╪╣ ╪з┘Д╪м╪з╪║╪▒┘К ┘Д╪п┘К┘Ж╪з ┘Е┘Ж ┘В╪╡╪и ╪з┘Д╪│┘Г╪▒ ╪з┘Д╪╣╪╢┘И┘К 100%.',
      bulk: '┘Ж╪╣┘Е! ┘Д┘Д╪╖┘Д╪и╪з╪к ╪и╪з┘Д╪м┘Е┘Д╪й ╪з┘Д╪к┘К ╪к╪▓┘К╪п ╪╣┘Ж 50 ┘Г╪м┘Е╪М ┘К╪▒╪м┘Й ╪з┘Д╪з╪к╪╡╪з┘Д ╪и┘Ж╪з. WhatsApp: +91 9876543210'
    }
  }
};

// Language name mapping for prompts
const languageNames = {
  en: 'English',
  hi: 'Hindi (рд╣рд┐рдВрджреА)',
  ta: 'Tamil (родрооро┐ро┤рпН)',
  te: 'Telugu (р░др▒Жр░▓р▒Бр░Чр▒Б)',
  kn: 'Kannada (р▓Хр▓ир│Нр▓ир▓б)',
  ml: 'Malayalam (р┤ор┤▓р┤пр┤╛р┤│р┤В)',
  mr: 'Marathi (рдорд░рд╛рдареА)',
  bn: 'Bengali (ржмрж╛ржВрж▓рж╛)',
  gu: 'Gujarati (ркЧрлБркЬрк░рк╛ркдрлА)',
  pa: 'Punjabi (рикрй░риЬри╛римрйА)',
  es: 'Spanish (Espa├▒ol)',
  fr: 'French (Fran├зais)',
  de: 'German (Deutsch)',
  ar: 'Arabic (╪з┘Д╪╣╪▒╪и┘К╪й)'
};

// ==================== PRODUCT DATA ====================

const productData = {
  powder: [
    { id: 'pw1kg', name: 'Jaggery Powder 1kg', price: 99, weight: '1kg', category: 'powder' },
    { id: 'pw2kg', name: 'Jaggery Powder 2kg', price: 199, weight: '2kg', category: 'powder' },
    { id: 'pw3kg', name: 'Jaggery Powder 3kg', price: 299, weight: '3kg', category: 'powder' },
    { id: 'pw5kg', name: 'Jaggery Powder 5kg', price: 399, weight: '5kg', category: 'powder' }
  ],
  cubes: [
    { id: 'cb1kg', name: 'Jaggery Cubes 1kg', price: 198, weight: '1kg', category: 'cubes' },
    { id: 'cb2kg', name: 'Jaggery Cubes 2kg', price: 398, weight: '2kg', category: 'cubes' },
    { id: 'cb3kg', name: 'Jaggery Cubes 3kg', price: 598, weight: '3kg', category: 'cubes' },
    { id: 'cb5kg', name: 'Jaggery Cubes 5kg', price: 798, weight: '5kg', category: 'cubes' }
  ]
};

// ==================== CHATBOT FUNCTIONS ====================

// Build system prompt based on language and user context
async function buildSystemPrompt(userId, language = 'en') {
  const t = translations[language] || translations.en;
  
  let orderHistory = '';
  if (userId) {
    try {
      const [user] = await db.select().from(users).where(eq(users.id, userId));
      if (user) {
        const userOrders = await db.select()
          .from(orders)
          .where(eq(orders.userId, userId))
          .orderBy(desc(orders.createdAt))
          .limit(5);
        
        if (userOrders.length > 0) {
          orderHistory = `\n\nCustomer Order History:\n${userOrders.map((o, i) => 
            `${i+1}. Order #${o.id} - тВ╣${o.totalAmount} - ${o.status} (${new Date(o.createdAt).toLocaleDateString()})`
          ).join('\n')}`;
        }
      }
    } catch (error) {
      console.error('Error fetching order history:', error);
    }
  }

  const systemPrompt = `You are a helpful, friendly customer support assistant for GUDY, an online jaggery (gur/ро╡рпЖро▓рпНро▓роорпН/р░мр▒Жр░▓р▒Нр░▓р░В) store.

PRODUCT CATALOG:
ЁЯНп Jaggery Powder:
- 1kg: тВ╣99
- 2kg: тВ╣199
- 3kg: тВ╣299 (FREE SHIPPING!)
- 5kg: тВ╣399 (FREE SHIPPING!)

ЁЯзК Jaggery Cubes:
- 1kg: тВ╣198
- 2kg: тВ╣398 (FREE SHIPPING!)
- 3kg: тВ╣598 (FREE SHIPPING!)
- 5kg: тВ╣798 (FREE SHIPPING!)

CONTACT INFORMATION:
ЁЯУЮ Phone: ${t.contact.phone}
ЁЯУз Email: ${t.contact.email}
ЁЯТм WhatsApp: ${t.contact.whatsapp}
тП░ Hours: ${t.contact.hours}

KEY FAQs:
ЁЯЪЪ Shipping: ${t.faqs.shipping}
ЁЯУж Delivery: ${t.faqs.delivery}
ЁЯТ░ Payment: ${t.faqs.cod}
ЁЯФД Returns: ${t.faqs.returns}
ЁЯУж Storage: ${t.faqs.storage}
тП│ Shelf Life: ${t.faqs.expiry}
ЁЯМ▒ Organic: ${t.faqs.organic}
ЁЯУж Bulk Orders: ${t.faqs.bulk}${orderHistory}

TONE & STYLE:
- Be warm, friendly, and conversational
- Use emojis appropriately (ЁЯОп ЁЯТЪ тЬи ЁЯУж etc.)
- Respond in ${languageNames[language] || 'English'}
- Provide specific product recommendations based on customer needs
- Reference customer's order history when relevant
- Always mention free shipping on orders above тВ╣299
- Highlight health benefits of jaggery (iron-rich, natural sweetener, immunity booster)
- If asked about orders, refer to the order history if available
- Keep responses concise and actionable
- Suggest quick replies for common actions
- Be proactive in helping customers complete purchases

IMPORTANT: 
- Always be accurate about pricing and product details
- Never make up information not provided in the system prompt
- If you don't know something, direct customers to contact support`;

  return systemPrompt;
}

// Call Groq API with better error handling
async function callGroqAPI(messages, systemPrompt) {
  try {
    if (!GROQ_API_KEY || GROQ_API_KEY.trim() === '') {
      throw new Error('GROQ_API_KEY is not configured');
    }

    const response = await axios.post(
      'https://api.groq.com/openai/v1/chat/completions',
      {
        model: 'llama-3.3-70b-versatile',
        messages: [
          { role: 'system', content: systemPrompt },
          ...messages
        ],
        temperature: 0.7,
        max_tokens: 1024,
        top_p: 1,
        stream: false
      },
      {
        headers: {
          'Authorization': `Bearer ${GROQ_API_KEY}`,
          'Content-Type': 'application/json'
        },
        timeout: 10000
      }
    );

    if (!response.data || !response.data.choices || !response.data.choices[0]) {
      throw new Error('Invalid response from Groq API');
    }

    return response.data.choices[0].message.content;
  } catch (error) {
    if (error.response) {
      console.error('Groq API Error Response:', {
        status: error.response.status,
        data: error.response.data
      });
    } else {
      console.error('Groq API Error:', error.message);
    }
    throw new Error('Failed to get AI response');
  }
}

// Generate quick replies based on context and language
function generateQuickReplies(message, language = 'en') {
  const quickRepliesMap = {
    en: {
      default: ["View products", "Shipping info", "Track order", "Contact support"],
      products: ["Powder products", "Cube products", "Health benefits", "Place order"],
      order: ["Track order", "Order status", "Return policy", "Contact support"],
      cart: ["View cart", "Checkout", "Continue shopping", "Clear cart"],
      shipping: ["Track order", "Return policy", "Contact support", "View products"]
    },
    hi: {
      default: ["рдЙрддреНрдкрд╛рдж рджреЗрдЦреЗрдВ", "рд╢рд┐рдкрд┐рдВрдЧ рдЬрд╛рдирдХрд╛рд░реА", "рдСрд░реНрдбрд░ рдЯреНрд░реИрдХ рдХрд░реЗрдВ", "рд╕рд╣рд╛рдпрддрд╛ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВ"],
      products: ["рдкрд╛рдЙрдбрд░ рдЙрддреНрдкрд╛рдж", "рдХреНрдпреВрдм рдЙрддреНрдкрд╛рдж", "рд╕реНрд╡рд╛рд╕реНрдереНрдп рд▓рд╛рдн", "рдСрд░реНрдбрд░ рдХрд░реЗрдВ"],
      order: ["рдСрд░реНрдбрд░ рдЯреНрд░реИрдХ рдХрд░реЗрдВ", "рдСрд░реНрдбрд░ рд╕реНрдерд┐рддрд┐", "рд░рд┐рдЯрд░реНрди рдкреЙрд▓рд┐рд╕реА", "рд╕рд╣рд╛рдпрддрд╛ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВ"],
      cart: ["рдХрд╛рд░реНрдЯ рджреЗрдЦреЗрдВ", "рдЪреЗрдХрдЖрдЙрдЯ", "рдЦрд░реАрджрд╛рд░реА рдЬрд╛рд░реА рд░рдЦреЗрдВ", "рдХрд╛рд░реНрдЯ рд╕рд╛рдлрд╝ рдХрд░реЗрдВ"],
      shipping: ["рдСрд░реНрдбрд░ рдЯреНрд░реИрдХ рдХрд░реЗрдВ", "рд░рд┐рдЯрд░реНрди рдкреЙрд▓рд┐рд╕реА", "рд╕рд╣рд╛рдпрддрд╛ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВ", "рдЙрддреНрдкрд╛рдж рджреЗрдЦреЗрдВ"]
    },
    ta: {
      default: ["родропро╛ро░ро┐рокрпНрокрпБроХро│рпИроХрпН роХро╛рогрпНроХ", "ро╖ро┐рокрпНрокро┐роЩрпН родроХро╡ро▓рпН", "роЖро░рпНроЯро░рпИроХрпН роХрогрпНроХро╛рогро┐роХрпНроХро╡рпБроорпН", "роЖродро░ро╡рпИродрпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│рпБроЩрпНроХро│рпН"],
      products: ["рокрпКроЯро┐ родропро╛ро░ро┐рокрпНрокрпБроХро│рпН", "роХрпНропрпВрокрпН родропро╛ро░ро┐рокрпНрокрпБроХро│рпН", "роЖро░рпЛроХрпНроХро┐роп роиройрпНроорпИроХро│рпН", "роЖро░рпНроЯро░рпН роЪрпЖропрпНропрпБроЩрпНроХро│рпН"],
      order: ["роЖро░рпНроЯро░рпИроХрпН роХрогрпНроХро╛рогро┐роХрпНроХро╡рпБроорпН", "роЖро░рпНроЯро░рпН роиро┐ро▓рпИ", "родро┐ро░рпБроорпНрокрокрпН рокрпЖро▒рпБроорпН роХрпКро│рпНроХрпИ", "роЖродро░ро╡рпИродрпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│рпБроЩрпНроХро│рпН"],
      cart: ["роХро╛ро░рпНроЯрпНроЯрпИроХрпН роХро╛рогрпНроХ", "роЪрпЖроХрпНроЕро╡рпБроЯрпН", "ро╖ро╛рокрпНрокро┐роЩрпН родрпКроЯро░ро╡рпБроорпН", "роХро╛ро░рпНроЯрпНроЯрпИ роЕро┤ро┐роХрпНроХро╡рпБроорпН"],
      shipping: ["роЖро░рпНроЯро░рпИроХрпН роХрогрпНроХро╛рогро┐роХрпНроХро╡рпБроорпН", "родро┐ро░рпБроорпНрокрокрпН рокрпЖро▒рпБроорпН роХрпКро│рпНроХрпИ", "роЖродро░ро╡рпИродрпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│рпБроЩрпНроХро│рпН", "родропро╛ро░ро┐рокрпНрокрпБроХро│рпИроХрпН роХро╛рогрпНроХ"]
    },
    te: {
      default: ["р░Йр░др▒Нр░кр░др▒Нр░др▒Бр░▓р░ир▒Б р░Ър▒Вр░бр░Вр░бр░┐", "р░╖р░┐р░кр▒Нр░кр░┐р░Вр░Чр▒Н р░╕р░ор░╛р░Ър░╛р░░р░В", "р░Жр░░р▒Нр░бр░░р▒НтАМр░ир▒Б р░Яр▒Нр░░р░╛р░Хр▒Н р░Ър▒Зр░пр░Вр░бр░┐", "р░ор░жр▒Нр░жр░др▒Бр░ир▒Б р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░Вр░бр░┐"],
      products: ["р░кр▒Кр░бр░┐ р░Йр░др▒Нр░кр░др▒Нр░др▒Бр░▓р▒Б", "р░Хр▒Нр░пр▒Вр░мр▒Н р░Йр░др▒Нр░кр░др▒Нр░др▒Бр░▓р▒Б", "р░Жр░░р▒Лр░Чр▒Нр░п р░кр▒Нр░░р░пр▒Лр░Ьр░ир░╛р░▓р▒Б", "р░Жр░░р▒Нр░бр░░р▒Н р░Ър▒Зр░пр░Вр░бр░┐"],
      order: ["р░Жр░░р▒Нр░бр░░р▒НтАМр░ир▒Б р░Яр▒Нр░░р░╛р░Хр▒Н р░Ър▒Зр░пр░Вр░бр░┐", "р░Жр░░р▒Нр░бр░░р▒Н р░╕р▒Нр░ер░┐р░др░┐", "р░░р░┐р░Яр░░р▒Нр░ир▒Н р░╡р░┐р░зр░╛р░ир░В", "р░ор░жр▒Нр░жр░др▒Бр░ир▒Б р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░Вр░бр░┐"],
      cart: ["р░Хр░╛р░░р▒Нр░Яр▒НтАМр░ир▒Б р░Ър▒Вр░бр░Вр░бр░┐", "р░Ър▒Жр░Хр▒Нр░Ер░╡р▒Бр░Яр▒Н", "р░╖р░╛р░кр░┐р░Вр░Чр▒Н р░Хр▒Кр░ир░╕р░╛р░Чр░┐р░Вр░Ър░Вр░бр░┐", "р░Хр░╛р░░р▒Нр░Яр▒НтАМр░ир▒Б р░Хр▒Нр░▓р░┐р░пр░░р▒Н р░Ър▒Зр░пр░Вр░бр░┐"],
      shipping: ["р░Жр░░р▒Нр░бр░░р▒НтАМр░ир▒Б р░Яр▒Нр░░р░╛р░Хр▒Н р░Ър▒Зр░пр░Вр░бр░┐", "р░░р░┐р░Яр░░р▒Нр░ир▒Н р░╡р░┐р░зр░╛р░ир░В", "р░ор░жр▒Нр░жр░др▒Бр░ир▒Б р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░Вр░бр░┐", "р░Йр░др▒Нр░кр░др▒Нр░др▒Бр░▓р░ир▒Б р░Ър▒Вр░бр░Вр░бр░┐"]
    }
    // Add more languages as needed following same pattern
  };

  const msgLower = message.toLowerCase();
  
  let context = 'default';
  if (msgLower.includes('product') || msgLower.includes('buy') || msgLower.includes('powder') || msgLower.includes('cube')) {
    context = 'products';
  } else if (msgLower.includes('order') || msgLower.includes('track')) {
    context = 'order';
  } else if (msgLower.includes('cart')) {
    context = 'cart';
  } else if (msgLower.includes('ship') || msgLower.includes('deliver')) {
    context = 'shipping';
  }

  const langReplies = quickRepliesMap[language] || quickRepliesMap.en;
  return langReplies[context] || langReplies.default;
}

// Fallback responses when Groq is not available - CORRECTED VERSION
function generateFallbackResponse(message, language = 'en') {
  const t = translations[language] || translations.en;
  const msgLower = message.toLowerCase();

  // Check for greeting/initial message
  if (msgLower.includes('hello') || msgLower.includes('hi') || msgLower.includes('hey') || 
      msgLower.includes('ро╡рогроХрпНроХроорпН') || msgLower.includes('рдирдорд╕реНрддреЗ') || msgLower.includes('р░ир░ор░╕р▒Нр░Хр░╛р░░р░В') ||
      msgLower === 'start' || message.trim() === '') {
    return {
      message: t.greeting,
      quickReplies: generateQuickReplies('greeting', language)
    };
  }

  if (msgLower.includes('product') || msgLower.includes('powder') || msgLower.includes('cube') ||
      msgLower.includes('родропро╛ро░ро┐рокрпНрокрпБ') || msgLower.includes('рокрпКроЯро┐') || msgLower.includes('рдЙрддреНрдкрд╛рдж') || 
      msgLower.includes('р░кр▒Кр░бр░┐') || msgLower.includes('р░Йр░др▒Нр░кр░др▒Нр░др░┐')) {
    const productMessages = {
      en: "We offer premium Jaggery Powder and Jaggery Cubes in various sizes:\n\nЁЯНп POWDER PACKS:\nтАв 1kg - тВ╣99\nтАв 2kg - тВ╣199\nтАв 3kg - тВ╣299\nтАв 5kg - тВ╣399\n\nЁЯзК CUBE PACKS:\nтАв 1kg - тВ╣198\nтАв 2kg - тВ╣398\nтАв 3kg - тВ╣598\nтАв 5kg - тВ╣798\n\nтЬи FREE shipping on orders above тВ╣299!",
      hi: "рд╣рдо рд╡рд┐рднрд┐рдиреНрди рдЖрдХрд╛рд░реЛрдВ рдореЗрдВ рдкреНрд░реАрдорд┐рдпрдо рдЧреБрдбрд╝ рдкрд╛рдЙрдбрд░ рдФрд░ рдЧреБрдбрд╝ рдХреНрдпреВрдмреНрд╕ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ:\n\nЁЯНп рдкрд╛рдЙрдбрд░ рдкреИрдХ:\nтАв 1kg - тВ╣99\nтАв 2kg - тВ╣199\nтАв 3kg - тВ╣299\nтАв 5kg - тВ╣399\n\nЁЯзК рдХреНрдпреВрдм рдкреИрдХ:\nтАв 1kg - тВ╣198\nтАв 2kg - тВ╣398\nтАв 3kg - тВ╣598\nтАв 5kg - тВ╣798\n\nтЬи тВ╣299 рд╕реЗ рдЕрдзрд┐рдХ рдХреЗ рдСрд░реНрдбрд░ рдкрд░ рдореБрдлреНрдд рд╢рд┐рдкрд┐рдВрдЧ!",
      ta: "рокро▓рпНро╡рпЗро▒рпБ роЕро│ро╡рпБроХро│ро┐ро▓рпН рокро┐ро░рпАрооро┐ропроорпН ро╡рпЖро▓рпНро▓роорпН рокрпКроЯро┐ рооро▒рпНро▒рпБроорпН ро╡рпЖро▓рпНро▓роорпН роХрпНропрпВрокрпНро╕рпН ро╡ро┤роЩрпНроХрпБроХро┐ро▒рпЛроорпН:\n\nЁЯНп рокрпКроЯро┐ рокрпЗроХрпНроХрпБроХро│рпН:\nтАв 1kg - тВ╣99\nтАв 2kg - тВ╣199\nтАв 3kg - тВ╣299\nтАв 5kg - тВ╣399\n\nЁЯзК роХрпНропрпВрокрпН рокрпЗроХрпНроХрпБроХро│рпН:\nтАв 1kg - тВ╣198\nтАв 2kg - тВ╣398\nтАв 3kg - тВ╣598\nтАв 5kg - тВ╣798\n\nтЬи тВ╣299 роХрпНроХрпБ роорпЗро▓рпН роЖро░рпНроЯро░рпНроХро│рпБроХрпНроХрпБ роЗро▓ро╡роЪ ро╖ро┐рокрпНрокро┐роЩрпН!",
      te: "р░ор▒Зр░ор▒Б р░╡р░┐р░╡р░┐р░з р░кр░░р░┐р░ор░╛р░гр░╛р░▓р░▓р▒Л р░кр▒Нр░░р▒Ар░ор░┐р░пр░В р░мр▒Жр░▓р▒Нр░▓р░В р░кр▒Кр░бр░┐ р░ор░░р░┐р░пр▒Б р░мр▒Жр░▓р▒Нр░▓р░В р░Хр▒Нр░пр▒Вр░мр▒Нр░╕р▒Н р░Ер░Вр░жр░┐р░╕р▒Нр░др░╛р░ор▒Б:\n\nЁЯНп р░кр▒Кр░бр░┐ р░кр░╛р░Хр▒НтАМр░▓р▒Б:\nтАв 1kg - тВ╣99\nтАв 2kg - тВ╣199\nтАв 3kg - тВ╣299\nтАв 5kg - тВ╣399\n\nЁЯзК р░Хр▒Нр░пр▒Вр░мр▒Н р░кр░╛р░Хр▒НтАМр░▓р▒Б:\nтАв 1kg - тВ╣198\nтАв 2kg - тВ╣398\nтАв 3kg - тВ╣598\nтАв 5kg - тВ╣798\n\nтЬи тВ╣299 р░кр▒Ир░Чр░╛ р░Жр░░р▒Нр░бр░░р▒Нр░▓р░Хр▒Б р░Йр░Ър░┐р░д р░╖р░┐р░кр▒Нр░кр░┐р░Вр░Чр▒Н!",
      kn: "р▓ир▓╛р▓╡р│Б р▓╡р▓┐р▓╡р▓┐р▓з р▓Чр▓╛р▓др│Нр▓░р▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓кр│Нр▓░р│Ар▓ор▓┐р▓пр▓В р▓мр│Жр▓▓р│Нр▓▓р▓ж р▓кр│Бр▓бр▓┐ р▓ор▓др│Нр▓др│Б р▓мр│Жр▓▓р│Нр▓▓р▓ж р▓Хр│Нр▓пр│Вр▓мр│Нр▓╕р│Н р▓ир│Ар▓бр│Бр▓др│Нр▓др│Зр▓╡р│Ж:\n\nЁЯНп р▓кр│Бр▓бр▓┐ р▓кр│Нр▓пр▓╛р▓Хр│НтАМр▓Чр▓│р│Б:\nтАв 1kg - тВ╣99\nтАв 2kg - тВ╣199\nтАв 3kg - тВ╣299\nтАв 5kg - тВ╣399\n\nЁЯзК р▓Хр│Нр▓пр│Вр▓мр│Н р▓кр│Нр▓пр▓╛р▓Хр│НтАМр▓Чр▓│р│Б:\nтАв 1kg - тВ╣198\nтАв 2kg - тВ╣398\nтАв 3kg - тВ╣598\nтАв 5kg - тВ╣798\n\nтЬи тВ╣299 р▓ор│Зр▓▓р▓┐р▓и р▓Жр▓░р│Нр▓бр▓░р│НтАМр▓Чр▓│р▓┐р▓Чр│Ж р▓Йр▓Ър▓┐р▓д р▓╢р▓┐р▓кр│Нр▓кр▓┐р▓Вр▓Чр│Н!",
      ml: "р┤Юр┤Щр╡Нр┤Щр╡╛ р┤╡р┤┐р┤╡р┤┐р┤з р┤╡р┤▓р╡Бр┤кр╡Нр┤кр┤Щр╡Нр┤Щр┤│р┤┐р╡╜ р┤кр╡Нр┤░р╡Ар┤ор┤┐р┤пр┤В р┤╢р╡╝р┤Хр╡Нр┤Хр┤░ р┤кр╡Кр┤Яр┤┐р┤пр╡Бр┤В р┤╢р╡╝р┤Хр╡Нр┤Хр┤░ р┤Хр╡Нр┤пр╡Вр┤мр╡Бр┤Хр┤│р╡Бр┤В р┤╡р┤╛р┤Чр╡Нр┤жр┤╛р┤ир┤В р┤Ър╡Жр┤пр╡Нр┤пр╡Бр┤ир╡Нр┤ир╡Б:\n\nЁЯНп р┤кр╡Кр┤Яр┤┐ р┤кр┤╛р┤пр╡Нр┤Хр╡Нр┤Хр╡Бр┤Хр╡╛:\nтАв 1kg - тВ╣99\nтАв 2kg - тВ╣199\nтАв 3kg - тВ╣299\nтАв 5kg - тВ╣399\n\nЁЯзК р┤Хр╡Нр┤пр╡Вр┤мр╡Н р┤кр┤╛р┤пр╡Нр┤Хр╡Нр┤Хр╡Бр┤Хр╡╛:\nтАв 1kg - тВ╣198\nтАв 2kg - тВ╣398\nтАв 3kg - тВ╣598\nтАв 5kg - тВ╣798\n\nтЬи тВ╣299 р┤ор╡Бр┤Хр┤│р┤┐р┤▓р╡Бр┤│р╡Нр┤│ р┤Ур╡╝р┤бр┤▒р╡Бр┤Хр╡╛р┤Хр╡Нр┤Хр╡Н р┤╕р╡Чр┤Ьр┤ир╡Нр┤п р┤╖р┤┐р┤кр╡Нр┤кр┤┐р┤Вр┤Чр╡Н!"
    };
    return {
      message: productMessages[language] || productMessages.en,
      quickReplies: generateQuickReplies(message, language)
    };
  }

  // Enhanced shipping/delivery fallback with multi-language support
  if (msgLower.includes('ship') || msgLower.includes('deliver') || msgLower.includes('delivery') ||
      msgLower.includes('shipping') || msgLower.includes('freight') || msgLower.includes('courier') ||
      msgLower.includes('dispatch') || msgLower.includes('send') || msgLower.includes('transport') ||
      msgLower.includes('when will') || msgLower.includes('how long') || msgLower.includes('track') ||
      msgLower.includes('arrive') || msgLower.includes('reach') || msgLower.includes('receive') ||
      msgLower.includes('рд╢рд┐рдкрд┐рдВрдЧ') || msgLower.includes('рдбрд┐рд▓реАрд╡рд░реА') || msgLower.includes('рд╡рд┐рддрд░рдг') ||
      msgLower.includes('ро╖ро┐рокрпНрокро┐роЩрпН') || msgLower.includes('роЯрпЖро▓ро┐ро╡ро░ро┐') || msgLower.includes('ро╡ро┐роиро┐ропрпЛроХроорпН') ||
      msgLower.includes('р░╖р░┐р░кр▒Нр░кр░┐р░Вр░Чр▒Н') || msgLower.includes('р░бр▒Жр░▓р░┐р░╡р░░р▒А') || msgLower.includes('р░кр░Вр░кр░┐р░гр▒А') ||
      msgLower.includes('р▓╢р▓┐р▓кр│Нр▓кр▓┐р▓Вр▓Чр│Н') || msgLower.includes('р▓бр│Жр▓▓р▓┐р▓╡р▓░р▓┐') || msgLower.includes('р▓╡р▓┐р▓др▓░р▓гр│Ж') ||
      msgLower.includes('р┤╖р┤┐р┤кр╡Нр┤кр┤┐р┤Вр┤Чр╡Н') || msgLower.includes('р┤бр╡Жр┤▓р┤┐р┤╡р┤▒р┤┐') || msgLower.includes('р┤╡р┤┐р┤др┤░р┤гр┤В') ||
      msgLower.includes('рд╢рд┐рдкреАрдВрдЧ') || msgLower.includes('рдбрд┐рд▓рд┐рд╡реНрд╣рд░реА') || msgLower.includes('ржкрж╛ржарж╛ржирзЛ') ||
      msgLower.includes('ржбрзЗрж▓рж┐ржнрж╛рж░рж┐') || msgLower.includes('рк╢рк┐рккрк┐ркВркЧ') || msgLower.includes('ркбрк┐рк▓рк┐рк╡рк░рлА') ||
      msgLower.includes('ри╕ри╝ри┐рикри┐рй░риЧ') || msgLower.includes('рибри┐ри▓рйАри╡ри░рйА')) {
    const shippingHeaders = {
      en: 'ЁЯУж Shipping Information',
      hi: 'ЁЯУж рд╢рд┐рдкрд┐рдВрдЧ рдЬрд╛рдирдХрд╛рд░реА',
      ta: 'ЁЯУж ро╖ро┐рокрпНрокро┐роЩрпН родроХро╡ро▓рпН',
      te: 'ЁЯУж р░╖р░┐р░кр▒Нр░кр░┐р░Вр░Чр▒Н р░╕р░ор░╛р░Ър░╛р░░р░В',
      kn: 'ЁЯУж р▓╢р▓┐р▓кр│Нр▓кр▓┐р▓Вр▓Чр│Н р▓ор▓╛р▓╣р▓┐р▓др▓┐',
      ml: 'ЁЯУж р┤╖р┤┐р┤кр╡Нр┤кр┤┐р┤Вр┤Чр╡Н р┤╡р┤┐р┤╡р┤░р┤В',
      mr: 'ЁЯУж рд╢рд┐рдкреАрдВрдЧ рдорд╛рд╣рд┐рддреА',
      bn: 'ЁЯУж рж╢рж┐ржкрж┐ржВ рждржерзНржп',
      gu: 'ЁЯУж рк╢рк┐рккрк┐ркВркЧ ркорк╛рк╣рк┐ркдрлА',
      pa: 'ЁЯУж ри╕ри╝ри┐рикри┐рй░риЧ риЬри╛ригриХри╛ри░рйА'
    };
    return {
      message: `${shippingHeaders[language] || shippingHeaders.en}\n\n${t.faqs.shipping}\n\n${t.faqs.delivery}`,
      quickReplies: generateQuickReplies(message, language)
    };
  }

  if (msgLower.includes('cod') || msgLower.includes('payment') || msgLower.includes('pay')) {
    return {
      message: t.faqs.cod,
      quickReplies: generateQuickReplies(message, language)
    };
  }

  if (msgLower.includes('return') || msgLower.includes('refund') || msgLower.includes('replace')) {
    return {
      message: t.faqs.returns,
      quickReplies: generateQuickReplies(message, language)
    };
  }

  if (msgLower.includes('storage') || msgLower.includes('store') || msgLower.includes('keep')) {
    return {
      message: t.faqs.storage,
      quickReplies: generateQuickReplies(message, language)
    };
  }

  if (msgLower.includes('expiry') || msgLower.includes('shelf life') || msgLower.includes('expire')) {
    return {
      message: t.faqs.expiry,
      quickReplies: generateQuickReplies(message, language)
    };
  }

  if (msgLower.includes('organic') || msgLower.includes('natural') || msgLower.includes('chemical')) {
    return {
      message: t.faqs.organic,
      quickReplies: generateQuickReplies(message, language)
    };
  }

  if (msgLower.includes('bulk') || msgLower.includes('wholesale') || msgLower.includes('50kg')) {
    return {
      message: t.faqs.bulk,
      quickReplies: generateQuickReplies(message, language)
    };
  }

  if (msgLower.includes('price') || msgLower.includes('cost') || msgLower.includes('how much') ||
      msgLower.includes('ро╡ро┐ро▓рпИ') || msgLower.includes('ро╡ро┐ро▓рпИ') || msgLower.includes('рдХреАрдордд') || 
      msgLower.includes('р░зр░░') || msgLower.includes('р▓мр│Жр▓▓р│Ж')) {
    const priceMessages = {
      en: "Here are our prices:\n\nЁЯНп JAGGERY POWDER:\nтАв 1kg - тВ╣99 (67% off)\nтАв 2kg - тВ╣199 (67% off)\nтАв 3kg - тВ╣299 (67% off)\nтАв 5kg - тВ╣399 (73% off)\n\nЁЯзК JAGGERY CUBES:\nтАв 1kg - тВ╣198 (67% off)\nтАв 2kg - тВ╣398 (67% off)\nтАв 3kg - тВ╣598 (67% off)\nтАв 5kg - тВ╣798 (73% off)\n\nтЬи FREE shipping on orders above тВ╣299!",
      hi: "рдпрд╣рд╛рдБ рд╣рдорд╛рд░реА рдХреАрдорддреЗрдВ рд╣реИрдВ:\n\nЁЯНп рдЧреБрдбрд╝ рдкрд╛рдЙрдбрд░:\nтАв 1kg - тВ╣99 (67% рдЫреВрдЯ)\nтАв 2kg - тВ╣199 (67% рдЫреВрдЯ)\nтАв 3kg - тВ╣299 (67% рдЫреВрдЯ)\nтАв 5kg - тВ╣399 (73% рдЫреВрдЯ)\n\nЁЯзК рдЧреБрдбрд╝ рдХреНрдпреВрдмреНрд╕:\nтАв 1kg - тВ╣198 (67% рдЫреВрдЯ)\nтАв 2kg - тВ╣398 (67% рдЫреВрдЯ)\nтАв 3kg - тВ╣598 (67% рдЫреВрдЯ)\nтАв 5kg - тВ╣798 (73% рдЫреВрдЯ)\n\nтЬи тВ╣299 рд╕реЗ рдЕрдзрд┐рдХ рдХреЗ рдСрд░реНрдбрд░ рдкрд░ рдореБрдлреНрдд рд╢рд┐рдкрд┐рдВрдЧ!",
      ta: "роОроЩрпНроХро│рпН ро╡ро┐ро▓рпИроХро│рпН роЗродрпЛ:\n\nЁЯНп ро╡рпЖро▓рпНро▓роорпН рокрпКроЯро┐:\nтАв 1kg - тВ╣99 (67% родро│рпНро│рпБрокроЯро┐)\nтАв 2kg - тВ╣199 (67% родро│рпНро│рпБрокроЯро┐)\nтАв 3kg - тВ╣299 (67% родро│рпНро│рпБрокроЯро┐)\nтАв 5kg - тВ╣399 (73% родро│рпНро│рпБрокроЯро┐)\n\nЁЯзК ро╡рпЖро▓рпНро▓роорпН роХрпНропрпВрокрпНро╕рпН:\nтАв 1kg - тВ╣198 (67% родро│рпНро│рпБрокроЯро┐)\nтАв 2kg - тВ╣398 (67% родро│рпНро│рпБрокроЯро┐)\nтАв 3kg - тВ╣598 (67% родро│рпНро│рпБрокроЯро┐)\nтАв 5kg - тВ╣798 (73% родро│рпНро│рпБрокроЯро┐)\n\nтЬи тВ╣299 роХрпНроХрпБ роорпЗро▓рпН роЖро░рпНроЯро░рпНроХро│рпБроХрпНроХрпБ роЗро▓ро╡роЪ ро╖ро┐рокрпНрокро┐роЩрпН!",
      te: "р░ор░╛ р░зр░░р░▓р▒Б р░Зр░╡р░┐:\n\nЁЯНп р░мр▒Жр░▓р▒Нр░▓р░В р░кр▒Мр░бр░░р▒Н:\nтАв 1kg - тВ╣99 (67% р░бр░┐р░╕р▒Нр░Хр▒Мр░Вр░Яр▒Н)\nтАв 2kg - тВ╣199 (67% р░бр░┐р░╕р▒Нр░Хр▒Мр░Вр░Яр▒Н)\nтАв 3kg - тВ╣299 (67% р░бр░┐р░╕р▒Нр░Хр▒Мр░Вр░Яр▒Н)\nтАв 5kg - тВ╣399 (73% р░бр░┐р░╕р▒Нр░Хр▒Мр░Вр░Яр▒Н)\n\nЁЯзК р░мр▒Жр░▓р▒Нр░▓р░В р░Хр▒Нр░пр▒Вр░мр▒Нр░╕р▒Н:\nтАв 1kg - тВ╣198 (67% р░бр░┐р░╕р▒Нр░Хр▒Мр░Вр░Яр▒Н)\nтАв 2kg - тВ╣398 (67% р░бр░┐р░╕р▒Нр░Хр▒Мр░Вр░Яр▒Н)\nтАв 3kg - тВ╣598 (67% р░бр░┐р░╕р▒Нр░Хр▒Мр░Вр░Яр▒Н)\nтАв 5kg - тВ╣798 (73% р░бр░┐р░╕р▒Нр░Хр▒Мр░Вр░Яр▒Н)\n\nтЬи тВ╣299 р░кр▒Ир░Чр░╛ р░Жр░░р▒Нр░бр░░р▒Нр░▓р░Хр▒Б р░Йр░Ър░┐р░д р░╖р░┐р░кр▒Нр░кр░┐р░Вр░Чр▒Н!",
      kn: "р▓ир▓ор│Нр▓о р▓мр│Жр▓▓р│Жр▓Чр▓│р│Б р▓Зр▓╡р│Б:\n\nЁЯНп р▓мр│Жр▓▓р│Нр▓▓р▓ж р▓кр│Бр▓бр▓┐:\nтАв 1kg - тВ╣99 (67% р▓░р▓┐р▓пр▓╛р▓пр▓┐р▓др▓┐)\nтАв 2kg - тВ╣199 (67% р▓░р▓┐р▓пр▓╛р▓пр▓┐р▓др▓┐)\nтАв 3kg - тВ╣299 (67% р▓░р▓┐р▓пр▓╛р▓пр▓┐р▓др▓┐)\nтАв 5kg - тВ╣399 (73% р▓░р▓┐р▓пр▓╛р▓пр▓┐р▓др▓┐)\n\nЁЯзК р▓мр│Жр▓▓р│Нр▓▓р▓ж р▓Хр│Нр▓пр│Вр▓мр│Нр▓╕р│Н:\nтАв 1kg - тВ╣198 (67% р▓░р▓┐р▓пр▓╛р▓пр▓┐р▓др▓┐)\nтАв 2kg - тВ╣398 (67% р▓░р▓┐р▓пр▓╛р▓пр▓┐р▓др▓┐)\nтАв 3kg - тВ╣598 (67% р▓░р▓┐р▓пр▓╛р▓пр▓┐р▓др▓┐)\nтАв 5kg - тВ╣798 (73% р▓░р▓┐р▓пр▓╛р▓пр▓┐р▓др▓┐)\n\nтЬи тВ╣299 р▓ор│Зр▓▓р▓┐р▓и р▓Жр▓░р│Нр▓бр▓░р│НтАМр▓Чр▓│р▓┐р▓Чр│Ж р▓Йр▓Ър▓┐р▓д р▓╢р▓┐р▓кр│Нр▓кр▓┐р▓Вр▓Чр│Н!",
      ml: "р┤Юр┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж р┤╡р┤┐р┤▓р┤Хр╡╛ р┤Зр┤др┤╛:\n\nЁЯНп р┤╢р╡╝р┤Хр╡Нр┤Хр┤░ р┤кр╡Кр┤Яр┤┐:\nтАв 1kg - тВ╣99 (67% р┤Хр┤┐р┤┤р┤┐р┤╡р╡Н)\nтАв 2kg - тВ╣199 (67% р┤Хр┤┐р┤┤р┤┐р┤╡р╡Н)\nтАв 3kg - тВ╣299 (67% р┤Хр┤┐р┤┤р┤┐р┤╡р╡Н)\nтАв 5kg - тВ╣399 (73% р┤Хр┤┐р┤┤р┤┐р┤╡р╡Н)\n\nЁЯзК р┤╢р╡╝р┤Хр╡Нр┤Хр┤░ р┤Хр╡Нр┤пр╡Вр┤мр╡Бр┤Хр╡╛:\nтАв 1kg - тВ╣198 (67% р┤Хр┤┐р┤┤р┤┐р┤╡р╡Н)\nтАв 2kg - тВ╣398 (67% р┤Хр┤┐р┤┤р┤┐р┤╡р╡Н)\nтАв 3kg - тВ╣598 (67% р┤Хр┤┐р┤┤р┤┐р┤╡р╡Н)\nтАв 5kg - тВ╣798 (73% р┤Хр┤┐р┤┤р┤┐р┤╡р╡Н)\n\nтЬи тВ╣299 р┤ор╡Бр┤Хр┤│р┤┐р┤▓р╡Бр┤│р╡Нр┤│ р┤Ур╡╝р┤бр┤▒р╡Бр┤Хр╡╛р┤Хр╡Нр┤Хр╡Н р┤╕р╡Чр┤Ьр┤ир╡Нр┤п р┤╖р┤┐р┤кр╡Нр┤кр┤┐р┤Вр┤Чр╡Н!",
      mr: "рдЖрдордЪреНрдпрд╛ рдХрд┐рдВрдорддреА рдпреЗрдереЗ рдЖрд╣реЗрдд:\n\nЁЯНп рдЧреВрд│ рдкрд╛рд╡рдбрд░:\nтАв 1kg - тВ╣99 (67% рд╕реВрдЯ)\nтАв 2kg - тВ╣199 (67% рд╕реВрдЯ)\nтАв 3kg - тВ╣299 (67% рд╕реВрдЯ)\nтАв 5kg - тВ╣399 (73% рд╕реВрдЯ)\n\nЁЯзК рдЧреВрд│ рдХреНрдпреВрдмреНрд╕:\nтАв 1kg - тВ╣198 (67% рд╕реВрдЯ)\nтАв 2kg - тВ╣398 (67% рд╕реВрдЯ)\nтАв 3kg - тВ╣598 (67% рд╕реВрдЯ)\nтАв 5kg - тВ╣798 (73% рд╕реВрдЯ)\n\nтЬи тВ╣299 рд╡рд░реАрд▓ рдСрд░реНрдбрд░рд╡рд░ рдореЛрдлрдд рд╢рд┐рдкрд┐рдВрдЧ!",
      bn: "ржЖржорж╛ржжрзЗрж░ ржжрж╛ржо ржПржЦрж╛ржирзЗ:\n\nЁЯНп ржЧрзБржбрж╝ ржкрж╛ржЙржбрж╛рж░:\nтАв 1kg - тВ╣99 (67% ржЫрж╛ржбрж╝)\nтАв 2kg - тВ╣199 (67% ржЫрж╛ржбрж╝)\nтАв 3kg - тВ╣299 (67% ржЫрж╛ржбрж╝)\nтАв 5kg - тВ╣399 (73% ржЫрж╛ржбрж╝)\n\nЁЯзК ржЧрзБржбрж╝ ржХрж┐ржЙржмрж╕:\nтАв 1kg - тВ╣198 (67% ржЫрж╛ржбрж╝)\nтАв 2kg - тВ╣398 (67% ржЫрж╛ржбрж╝)\nтАв 3kg - тВ╣598 (67% ржЫрж╛ржбрж╝)\nтАв 5kg - тВ╣798 (73% ржЫрж╛ржбрж╝)\n\nтЬи тВ╣299 ржПрж░ ржЙржкрж░рзЗ ржЕрж░рзНржбрж╛рж░рзЗ ржмрж┐ржирж╛ржорзВрж▓рзНржпрзЗ рж╢рж┐ржкрж┐ржВ!",
      gu: "ркЕркорк╛рк░рлА ркХрк┐ркВркоркдрлЛ ркЕрк╣рлАркВ ркЫрлЗ:\n\nЁЯНп ркЧрлЛрк│ рккрк╛рк╡ркбрк░:\nтАв 1kg - тВ╣99 (67% ркЫрлВркЯ)\nтАв 2kg - тВ╣199 (67% ркЫрлВркЯ)\nтАв 3kg - тВ╣299 (67% ркЫрлВркЯ)\nтАв 5kg - тВ╣399 (73% ркЫрлВркЯ)\n\nЁЯзК ркЧрлЛрк│ ркХрлНркпрлБркмрлНрк╕:\nтАв 1kg - тВ╣198 (67% ркЫрлВркЯ)\nтАв 2kg - тВ╣398 (67% ркЫрлВркЯ)\nтАв 3kg - тВ╣598 (67% ркЫрлВркЯ)\nтАв 5kg - тВ╣798 (73% ркЫрлВркЯ)\n\nтЬи тВ╣299 ркЙрккрк░ркирк╛ ркУрк░рлНркбрк░ рккрк░ ркорклркд рк╢рк┐рккрк┐ркВркЧ!",
      pa: "ри╕ри╛рибрйАриЖриВ риХрйАриоридри╛риВ риЗрй▒риерйЗ ри╣рии:\n\nЁЯНп риЧрйБрйЬ рикри╛риКрибри░:\nтАв 1kg - тВ╣99 (67% риЫрйВриЯ)\nтАв 2kg - тВ╣199 (67% риЫрйВриЯ)\nтАв 3kg - тВ╣299 (67% риЫрйВриЯ)\nтАв 5kg - тВ╣399 (73% риЫрйВриЯ)\n\nЁЯзК риЧрйБрйЬ риХри┐риКримри╕:\nтАв 1kg - тВ╣198 (67% риЫрйВриЯ)\nтАв 2kg - тВ╣398 (67% риЫрйВриЯ)\nтАв 3kg - тВ╣598 (67% риЫрйВриЯ)\nтАв 5kg - тВ╣798 (73% риЫрйВриЯ)\n\nтЬи тВ╣299 ридрйЛриВ риЙрй▒рикри░ рижрйЗ риЖри░рибри░ ридрйЗ риорйБрилрид ри╕ри╝ри┐рикри┐рй░риЧ!"
    };
    return {
      message: priceMessages[language] || priceMessages.en,
      quickReplies: generateQuickReplies(message, language)
    };
  }

  if (msgLower.includes('benefit') || msgLower.includes('health') || msgLower.includes('good for') ||
      msgLower.includes('роиройрпНроорпИроХро│рпН') || msgLower.includes('роЖро░рпЛроХрпНроХро┐роп') || msgLower.includes('рд▓рд╛рдн') || 
      msgLower.includes('рд╕реНрд╡рд╛рд╕реНрдереНрдп') || msgLower.includes('р░кр▒Нр░░р░пр▒Лр░Ьр░ир░╛р░▓р▒Б') || msgLower.includes('р┤Жр┤░р╡Лр┤Чр╡Нр┤п')) {
    const healthMessages = {
      en: "ЁЯМ┐ Health Benefits of Jaggery:\n\nтЬЕ Rich in iron - prevents anemia\nтЬЕ Boosts immunity\nтЬЕ Aids digestion\nтЬЕ Cleanses the body\nтЬЕ Natural energy source\nтЬЕ Good for skin health\nтЬЕ Relieves joint pain\n\nOur jaggery is 100% organic and chemical-free!",
      hi: "ЁЯМ┐ рдЧреБрдбрд╝ рдХреЗ рд╕реНрд╡рд╛рд╕реНрдереНрдп рд▓рд╛рдн:\n\nтЬЕ рдЖрдпрд░рди рд╕реЗ рднрд░рдкреВрд░ - рдПрдиреАрдорд┐рдпрд╛ рд░реЛрдХрддрд╛ рд╣реИ\nтЬЕ рдкреНрд░рддрд┐рд░рдХреНрд╖рд╛ рдмрдврд╝рд╛рддрд╛ рд╣реИ\nтЬЕ рдкрд╛рдЪрди рдореЗрдВ рд╕рд╣рд╛рдпрдХ\nтЬЕ рд╢рд░реАрд░ рдХреЛ рд╕рд╛рдл рдХрд░рддрд╛ рд╣реИ\nтЬЕ рдкреНрд░рд╛рдХреГрддрд┐рдХ рдКрд░реНрдЬрд╛ рд╕реНрд░реЛрдд\nтЬЕ рддреНрд╡рдЪрд╛ рдХреЗ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХреЗ рд▓рд┐рдП рдЕрдЪреНрдЫрд╛\nтЬЕ рдЬреЛрдбрд╝реЛрдВ рдХреЗ рджрд░реНрдж рдореЗрдВ рд░рд╛рд╣рдд\n\nрд╣рдорд╛рд░рд╛ рдЧреБрдбрд╝ 100% рдЬреИрд╡рд┐рдХ рдФрд░ рд░рд╕рд╛рдпрди рдореБрдХреНрдд рд╣реИ!",
      ta: "ЁЯМ┐ ро╡рпЖро▓рпНро▓родрпНродро┐ройрпН роЖро░рпЛроХрпНроХро┐роп роиройрпНроорпИроХро│рпН:\n\nтЬЕ роЗро░рпБроорпНрокрпБроЪрпНроЪродрпНродрпБ роиро┐ро▒рпИроирпНродродрпБ - роЗро░родрпНродроЪрпЛроХрпИропрпИродрпН родроЯрпБроХрпНроХро┐ро▒родрпБ\nтЬЕ роирпЛропрпН роОродро┐ро░рпНрокрпНрокрпБ роЪроХрпНродро┐ропрпИ роЕродро┐роХро░ро┐роХрпНроХро┐ро▒родрпБ\nтЬЕ роЪрпЖро░ро┐рооро╛ройродрпНродро┐ро▒рпНроХрпБ роЙродро╡рпБроХро┐ро▒родрпБ\nтЬЕ роЙроЯро▓рпИ роЪрпБродрпНродрокрпНрокроЯрпБродрпНродрпБроХро┐ро▒родрпБ\nтЬЕ роЗропро▒рпНроХрпИ роЖро▒рпНро▒ро▓рпН роорпВро▓роорпН\nтЬЕ роЪро░рпБроо роЖро░рпЛроХрпНроХро┐ропродрпНродро┐ро▒рпНроХрпБ роиро▓рпНро▓родрпБ\nтЬЕ роорпВроЯрпНроЯрпБ ро╡ро▓ро┐ропрпИроХрпН роХрпБро▒рпИроХрпНроХро┐ро▒родрпБ\n\nроОроЩрпНроХро│рпН ро╡рпЖро▓рпНро▓роорпН 100% роЗропро▒рпНроХрпИ рооро▒рпНро▒рпБроорпН роЗро░роЪро╛ропройроорпН роЗро▓рпНро▓ро╛родродрпБ!",
      te: "ЁЯМ┐ р░мр▒Жр░▓р▒Нр░▓р░В р░Жр░░р▒Лр░Чр▒Нр░п р░кр▒Нр░░р░пр▒Лр░Ьр░ир░╛р░▓р▒Б:\n\nтЬЕ р░Зр░ир▒Бр░ор▒Б р░кр▒Бр░╖р▒Нр░Хр░▓р░Вр░Чр░╛ - р░░р░Хр▒Нр░др░╣р▒Ар░ир░др░ир▒Б р░ир░┐р░╡р░╛р░░р░┐р░╕р▒Нр░др▒Бр░Вр░жр░┐\nтЬЕ р░░р▒Лр░Чр░ир░┐р░░р▒Лр░зр░Х р░╢р░Хр▒Нр░др░┐р░ир░┐ р░кр▒Жр░Вр░Ър▒Бр░др▒Бр░Вр░жр░┐\nтЬЕ р░Ьр▒Ар░░р▒Нр░гр░Хр▒Нр░░р░┐р░пр░Хр▒Б р░╕р░╣р░╛р░пр░кр░бр▒Бр░др▒Бр░Вр░жр░┐\nтЬЕ р░╢р░░р▒Ар░░р░╛р░ир▒Нр░ир░┐ р░╢р▒Бр░нр▒Нр░░р░кр░░р▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐\nтЬЕ р░╕р░╣р░Ь р░╢р░Хр▒Нр░др░┐ р░ор▒Вр░▓р░В\nтЬЕ р░Ър░░р▒Нр░о р░Жр░░р▒Лр░Чр▒Нр░пр░╛р░ир░┐р░Хр░┐ р░ор░Вр░Ър░┐р░жр░┐\nтЬЕ р░Хр▒Ар░│р▒Нр░▓ р░ир▒Кр░кр▒Нр░кр▒Бр░▓р░ир▒Б р░др░Чр▒Нр░Чр░┐р░╕р▒Нр░др▒Бр░Вр░жр░┐\n\nр░ор░╛ р░мр▒Жр░▓р▒Нр░▓р░В 100% р░╕р▒Зр░Вр░жр▒Нр░░р▒Ар░п р░ор░░р░┐р░пр▒Б р░░р░╕р░╛р░пр░и р░░р░╣р░┐р░др░В!",
      kn: "ЁЯМ┐ р▓мр│Жр▓▓р│Нр▓▓р▓ж р▓Жр▓░р│Лр▓Чр│Нр▓п р▓кр│Нр▓░р▓пр│Лр▓Ьр▓ир▓Чр▓│р│Б:\n\nтЬЕ р▓Хр▓мр│Нр▓мр▓┐р▓г р▓╕р▓ор│Гр▓жр│Нр▓з - р▓░р▓Хр│Нр▓др▓╣р│Ар▓ир▓др│Жр▓пр▓ир│Нр▓ир│Б р▓др▓бр│Жр▓пр│Бр▓др│Нр▓др▓жр│Ж\nтЬЕ р▓░р│Лр▓Чр▓ир▓┐р▓░р│Лр▓зр▓Х р▓╢р▓Хр│Нр▓др▓┐р▓пр▓ир│Нр▓ир│Б р▓╣р│Жр▓Ър│Нр▓Ър▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж\nтЬЕ р▓Ьр│Ар▓░р│Нр▓гр▓Хр│Нр▓░р▓┐р▓пр│Жр▓Чр│Ж р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр│Бр▓др│Нр▓др▓жр│Ж\nтЬЕ р▓жр│Зр▓╣р▓╡р▓ир│Нр▓ир│Б р▓╢р│Бр▓жр│Нр▓зр│Ар▓Хр▓░р▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж\nтЬЕ р▓ир│Ир▓╕р▓░р│Нр▓Чр▓┐р▓Х р▓╢р▓Хр│Нр▓др▓┐ р▓ор│Вр▓▓\nтЬЕ р▓Ър▓░р│Нр▓ор▓ж р▓Жр▓░р│Лр▓Чр│Нр▓пр▓Хр│Нр▓Хр│Ж р▓Тр▓│р│Нр▓│р│Жр▓пр▓жр│Б\nтЬЕ р▓Хр│Ар▓▓р│Б р▓ир│Лр▓╡р│Б р▓ир▓┐р▓╡р▓╛р▓░р▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж\n\nр▓ир▓ор│Нр▓о р▓мр│Жр▓▓р│Нр▓▓ 100% р▓╕р▓╛р▓╡р▓пр▓╡ р▓ор▓др│Нр▓др│Б р▓░р▓╛р▓╕р▓╛р▓пр▓ир▓┐р▓Х р▓ор│Бр▓Хр│Нр▓д!",
      ml: "ЁЯМ┐ р┤╢р╡╝р┤Хр╡Нр┤Хр┤░р┤пр╡Бр┤Яр╡Ж р┤Жр┤░р╡Лр┤Чр╡Нр┤п р┤Чр╡Бр┤гр┤Щр╡Нр┤Щр╡╛:\n\nтЬЕ р┤Зр┤░р╡Бр┤ор╡Нр┤кр╡Н р┤╕р┤ор╡Гр┤жр╡Нр┤зр┤ор┤╛р┤гр╡Н - р┤╡р┤┐р┤│р╡╝р┤Ър╡Нр┤Ъ р┤др┤Яр┤пр╡Бр┤ир╡Нр┤ир╡Б\nтЬЕ р┤кр╡Нр┤░р┤др┤┐р┤░р╡Лр┤зр┤╢р╡Зр┤╖р┤┐ р┤╡р╡╝р┤жр╡Нр┤зр┤┐р┤кр╡Нр┤кр┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б\nтЬЕ р┤жр┤╣р┤ир┤др╡Нр┤др╡Ж р┤╕р┤╣р┤╛р┤пр┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б\nтЬЕ р┤╢р┤░р╡Ар┤░р┤др╡Нр┤др╡Ж р┤╢р╡Бр┤жр╡Нр┤зр╡Ар┤Хр┤░р┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б\nтЬЕ р┤кр╡Нр┤░р┤Хр╡Гр┤др┤┐р┤жр┤др╡Нр┤д р┤Кр╡╝р┤Ьр╡Нр┤Ь р┤╕р╡Нр┤░р╡Лр┤др┤╕р╡Нр┤╕р╡Н\nтЬЕ р┤Ър╡╝р┤ор╡Нр┤о р┤Жр┤░р╡Лр┤Чр╡Нр┤пр┤др╡Нр┤др┤┐р┤ир╡Н р┤ир┤▓р╡Нр┤▓р┤др╡Н\nтЬЕ р┤╕р┤ир╡Нр┤зр┤┐ р┤╡р╡Зр┤жр┤и р┤╢р┤ор┤┐р┤кр╡Нр┤кр┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б\n\nр┤Юр┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж р┤╢р╡╝р┤Хр╡Нр┤Хр┤░ 100% р┤Ьр╡Ир┤╡р┤╡р╡Бр┤В р┤░р┤╛р┤╕р┤╡р┤╕р╡Нр┤др╡Б р┤░р┤╣р┤┐р┤др┤╡р╡Бр┤ор┤╛р┤гр╡Н!",
      mr: "ЁЯМ┐ рдЧреБрд│рд╛рдЪреЗ рдЖрд░реЛрдЧреНрдп рдлрд╛рдпрджреЗ:\n\nтЬЕ рд▓реЛрд╣рд╛рдиреЗ рд╕рдореГрджреНрдз - рдЕрд╢рдХреНрддрдкрдгрд╛ рд░реЛрдЦрддреЛ\nтЬЕ рд░реЛрдЧрдкреНрд░рддрд┐рдХрд╛рд░рдХ рд╢рдХреНрддреА рд╡рд╛рдврд╡рддреЛ\nтЬЕ рдкрдЪрдирд╛рд╕ рдорджрдд рдХрд░рддреЛ\nтЬЕ рд╢рд░реАрд░ рд╢реБрджреНрдз рдХрд░рддреЛ\nтЬЕ рдиреИрд╕рд░реНрдЧрд┐рдХ рдКрд░реНрдЬрд╛ рд╕реНрд░реЛрдд\nтЬЕ рддреНрд╡рдЪреЗрдЪреНрдпрд╛ рдЖрд░реЛрдЧреНрдпрд╛рд╕рд╛рдареА рдЪрд╛рдВрдЧрд▓реЗ\nтЬЕ рд╕рд╛рдВрдзреЗрджреБрдЦреА рдХрдореА рдХрд░рддреЛ\n\nрдЖрдордЪрд╛ рдЧреВрд│ 100% рд╕реЗрдВрджреНрд░рд┐рдп рдЖрдгрд┐ рд░рд╕рд╛рдпрдирдореБрдХреНрдд рдЖрд╣реЗ!",
      bn: "ЁЯМ┐ ржЧрзБржбрж╝рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп ржЙржкржХрж╛рж░рж┐рждрж╛:\n\nтЬЕ рж▓рзЛрж╣рж╛ рж╕ржорзГржжрзНржз - рж░ржХрзНрждрж╛рж▓рзНржкрждрж╛ ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░рзЗ\nтЬЕ рж░рзЛржЧ ржкрзНрж░рждрж┐рж░рзЛржз ржХрзНрж╖ржорждрж╛ ржмрж╛ржбрж╝рж╛ржпрж╝\nтЬЕ рж╣ржЬржорзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ\nтЬЕ рж╢рж░рзАрж░ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рзЗ\nтЬЕ ржкрзНрж░рж╛ржХрзГрждрж┐ржХ рж╢ржХрзНрждрж┐рж░ ржЙрзОрж╕\nтЬЕ рждрзНржмржХрзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржпрзЗрж░ ржЬржирзНржп ржнрж╛рж▓\nтЬЕ ржЬржпрж╝рзЗржирзНржЯрзЗрж░ ржмрзНржпржерж╛ ржЙржкрж╢ржо ржХрж░рзЗ\n\nржЖржорж╛ржжрзЗрж░ ржЧрзБржбрж╝ 100% ржЬрзИржм ржПржмржВ рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржорзБржХрзНржд!",
      gu: "ЁЯМ┐ ркЧрлЛрк│ркирк╛ ркЖрк░рлЛркЧрлНркп рк▓рк╛ркн:\n\nтЬЕ рк▓рлЛрк╣ркерлА рк╕ркорлГркжрлНркз - ркПркирк┐ркорк┐ркпрк╛ ркЕркЯркХрк╛рк╡рлЗ ркЫрлЗ\nтЬЕ рк░рлЛркЧрккрлНрк░ркдрк┐ркХрк╛рк░ркХ рк╢ркХрлНркдрк┐ рк╡ркзрк╛рк░рлЗ ркЫрлЗ\nтЬЕ рккрк╛ркЪркиркорк╛ркВ ркоркжркж ркХрк░рлЗ ркЫрлЗ\nтЬЕ рк╢рк░рлАрк░ркирлЗ рк╢рлБркжрлНркз ркХрк░рлЗ ркЫрлЗ\nтЬЕ ркХрлБркжрк░ркдрлА ркКрк░рлНркЬрк╛ рк╕рлНркдрлНрк░рлЛркд\nтЬЕ ркдрлНрк╡ркЪрк╛ рк╕рлНрк╡рк╛рк╕рлНркерлНркп ркорк╛ркЯрлЗ рк╕рк╛рк░рлБркВ\nтЬЕ рк╕рк╛ркВркзрк╛ркирк╛ ркжрлБркЦрк╛рк╡рк╛ ркжрлВрк░ ркХрк░рлЗ ркЫрлЗ\n\nркЕркорк╛рк░рлЛ ркЧрлЛрк│ 100% ркХрк╛рк░рлНркмркирк┐ркХ ркЕркирлЗ рк░рк╕рк╛ркпркг ркорлБркХрлНркд ркЫрлЗ!",
      pa: "ЁЯМ┐ риЧрйБрйЬ рижрйЗ ри╕ри┐ри╣рид ри▓ри╛рин:\n\nтЬЕ риЖриЗри░рии риири╛ри▓ ринри░рикрйВри░ - риЕриирйАриорйАриЖ ри░рйЛриХрижри╛ ри╣рйИ\nтЬЕ ри░рйЛриЧ рикрйНри░ридрйАри░рйЛризриХ ри╕ри╝риХридрйА ри╡ризри╛риЙриВрижри╛ ри╣рйИ\nтЬЕ рикри╛риЪрии ри╡ри┐рй▒риЪ риорижриж риХри░рижри╛ ри╣рйИ\nтЬЕ ри╕ри░рйАри░ риирйВрй░ ри╕ри╛рилри╝ риХри░рижри╛ ри╣рйИ\nтЬЕ риХрйБрижри░ридрйА риКри░риЬри╛ ри╕ри░рйЛрид\nтЬЕ риЪриорйЬрйА рижрйА ри╕ри┐ри╣рид ри▓риИ риЪрй░риЧри╛\nтЬЕ риЬрйЛрйЬри╛риВ рижрйЗ рижри░риж риирйВрй░ риШриЯри╛риЙриВрижри╛ ри╣рйИ\n\nри╕ри╛рибри╛ риЧрйБрйЬ 100% риЬрйИри╡ри┐риХ риЕридрйЗ ри░ри╕ри╛риЗриг риорйБриХрид ри╣рйИ!"
    };
    return {
      message: healthMessages[language] || healthMessages.en,
      quickReplies: generateQuickReplies(message, language)
    };
  }

  if (msgLower.includes('track') || msgLower.includes('order') || msgLower.includes('status') ||
      msgLower.includes('роХрогрпНроХро╛рогро┐') || msgLower.includes('роЖро░рпНроЯро░рпН') || msgLower.includes('рдЯреНрд░реИрдХ') || 
      msgLower.includes('рдСрд░реНрдбрд░') || msgLower.includes('р░Яр▒Нр░░р░╛р░Хр▒Н')) {
    const trackMessages = {
      en: "To track your order:\n\n1. Log in to your account\n2. Go to 'My Orders' section\n3. Click on the order you want to track\n\nYou can also contact our support team:\nЁЯУЮ Phone: +91 9876543210\nЁЯТм WhatsApp: +91 9876543210",
      hi: "рдЕрдкрдиреЗ рдСрд░реНрдбрд░ рдХреЛ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:\n\n1. рдЕрдкрдиреЗ рдЦрд╛рддреЗ рдореЗрдВ рд▓реЙрдЧ рдЗрди рдХрд░реЗрдВ\n2. 'рдореЗрд░реЗ рдСрд░реНрдбрд░' рдЕрдиреБрднрд╛рдЧ рдкрд░ рдЬрд╛рдПрдВ\n3. рдЙрд╕ рдСрд░реНрдбрд░ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдЬрд┐рд╕реЗ рдЖрдк рдЯреНрд░реИрдХ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ\n\nрдЖрдк рд╣рдорд╛рд░реА рд╕рд╣рд╛рдпрддрд╛ рдЯреАрдо рд╕реЗ рднреА рд╕рдВрдкрд░реНрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:\nЁЯУЮ рдлреЛрди: +91 9876543210\nЁЯТм WhatsApp: +91 9876543210",
      ta: "роЙроЩрпНроХро│рпН роЖро░рпНроЯро░рпИ роХрогрпНроХро╛рогро┐роХрпНроХ:\n\n1. роЙроЩрпНроХро│рпН роХрогроХрпНроХро┐ро▓рпН роЙро│рпНроирпБро┤рпИропро╡рпБроорпН\n2. 'роОройродрпБ роЖро░рпНроЯро░рпНроХро│рпН' рокро┐ро░ро┐ро╡рпБроХрпНроХрпБроЪрпН роЪрпЖро▓рпНро▓ро╡рпБроорпН\n3. роирпАроЩрпНроХро│рпН роХрогрпНроХро╛рогро┐роХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроорпН роЖро░рпНроЯро░ро┐ро▓рпН роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН\n\nроирпАроЩрпНроХро│рпН роОроЩрпНроХро│рпН роЖродро░ро╡рпБ роХрпБро┤рпБро╡рпИропрпБроорпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ро▓ро╛роорпН:\nЁЯУЮ родрпКро▓рпИрокрпЗроЪро┐: +91 9876543210\nЁЯТм WhatsApp: +91 9876543210",
      te: "р░ор▒А р░Жр░░р▒Нр░бр░░р▒НтАМр░ир▒Б р░Яр▒Нр░░р░╛р░Хр▒Н р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐:\n\n1. р░ор▒А р░Цр░╛р░др░╛р░▓р▒Лр░Хр░┐ р░▓р░╛р░Чр░┐р░ир▒Н р░Ер░╡р▒Нр░╡р░Вр░бр░┐\n2. 'р░ир░╛ р░Жр░░р▒Нр░бр░░р▒Нр░▓р▒Б' р░╡р░┐р░нр░╛р░Чр░╛р░ир░┐р░Хр░┐ р░╡р▒Жр░│р▒Нр░▓р░Вр░бр░┐\n3. р░ор▒Ар░░р▒Б р░Яр▒Нр░░р░╛р░Хр▒Н р░Ър▒Зр░пр░╛р░▓р░ир▒Бр░Хр▒Бр░Вр░Яр▒Бр░ир▒Нр░и р░Жр░░р▒Нр░бр░░р▒НтАМр░кр▒И р░Хр▒Нр░▓р░┐р░Хр▒Н р░Ър▒Зр░пр░Вр░бр░┐\n\nр░ор▒Ар░░р▒Б р░ор░╛ р░ор░жр▒Нр░жр░др▒Б р░мр▒Гр░Вр░жр░╛р░ир▒Нр░ир░┐ р░Хр▒Вр░бр░╛ р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░╡р░Ър▒Нр░Ър▒Б:\nЁЯУЮ р░лр▒Лр░ир▒Н: +91 9876543210\nЁЯТм WhatsApp: +91 9876543210",
      kn: "р▓ир▓┐р▓ор│Нр▓о р▓Жр▓░р│Нр▓бр▓░р│Н р▓Ер▓ир│Нр▓ир│Б р▓Яр│Нр▓░р│Нр▓пр▓╛р▓Хр│Н р▓ор▓╛р▓бр▓▓р│Б:\n\n1. р▓ир▓┐р▓ор│Нр▓о р▓Цр▓╛р▓др│Жр▓Чр│Ж р▓▓р▓╛р▓Чр│Н р▓Зр▓ир│Н р▓ор▓╛р▓бр▓┐\n2. 'р▓ир▓ир│Нр▓и р▓Жр▓░р│Нр▓бр▓░р│НтАМр▓Чр▓│р│Б' р▓╡р▓┐р▓нр▓╛р▓Чр▓Хр│Нр▓Хр│Ж р▓╣р│Лр▓Чр▓┐\n3. р▓ир│Ар▓╡р│Б р▓Яр│Нр▓░р│Нр▓пр▓╛р▓Хр│Н р▓ор▓╛р▓бр▓▓р│Б р▓мр▓пр▓╕р│Бр▓╡ р▓Жр▓░р│Нр▓бр▓░р│Н р▓ор│Зр▓▓р│Ж р▓Хр│Нр▓▓р▓┐р▓Хр│Н р▓ор▓╛р▓бр▓┐\n\nр▓ир│Ар▓╡р│Б р▓ир▓ор│Нр▓о р▓мр│Жр▓Вр▓мр▓▓ р▓др▓Вр▓бр▓╡р▓ир│Нр▓ир│Б р▓╕р▓╣ р▓╕р▓Вр▓кр▓░р│Нр▓Хр▓┐р▓╕р▓мр▓╣р│Бр▓жр│Б:\nЁЯУЮ р▓лр│Лр▓ир│Н: +91 9876543210\nЁЯТм WhatsApp: +91 9876543210",
      ml: "р┤ир┤┐р┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж р┤Ур╡╝р┤бр╡╝ р┤Яр╡Нр┤░р┤╛р┤Хр╡Нр┤Хр╡Н р┤Ър╡Жр┤пр╡Нр┤пр┤╛р╡╗:\n\n1. р┤ир┤┐р┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж р┤Ер┤Хр╡Нр┤Хр╡Чр┤гр╡Нр┤Яр┤┐р┤▓р╡Зр┤Хр╡Нр┤Хр╡Н р┤▓р╡Лр┤Чр┤┐р╡╗ р┤Ър╡Жр┤пр╡Нр┤пр╡Бр┤Х\n2. 'р┤Ор┤ир╡Нр┤▒р╡Ж р┤Ур╡╝р┤бр┤▒р╡Бр┤Хр╡╛' р┤╡р┤┐р┤нр┤╛р┤Чр┤др╡Нр┤др┤┐р┤▓р╡Зр┤Хр╡Нр┤Хр╡Н р┤кр╡Лр┤Хр╡Бр┤Х\n3. р┤ир┤┐р┤Щр╡Нр┤Щр╡╛ р┤Яр╡Нр┤░р┤╛р┤Хр╡Нр┤Хр╡Н р┤Ър╡Жр┤пр╡Нр┤пр┤╛р╡╗ р┤Жр┤Чр╡Нр┤░р┤╣р┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤и р┤Ур╡╝р┤бр┤▒р┤┐р╡╜ р┤Хр╡Нр┤▓р┤┐р┤Хр╡Нр┤Хр╡Н р┤Ър╡Жр┤пр╡Нр┤пр╡Бр┤Х\n\nр┤ир┤┐р┤Щр╡Нр┤Щр╡╛р┤Хр╡Нр┤Хр╡Н р┤Юр┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж р┤кр┤┐р┤ир╡Нр┤др╡Бр┤гр┤╛ р┤Яр╡Ар┤ор┤┐р┤ир╡Жр┤пр╡Бр┤В р┤мр┤ир╡Нр┤зр┤кр╡Нр┤кр╡Жр┤Яр┤╛р┤В:\nЁЯУЮ р┤лр╡Лр╡║: +91 9876543210\nЁЯТм WhatsApp: +91 9876543210"
    };
    return {
      message: trackMessages[language] || trackMessages.en,
      quickReplies: generateQuickReplies(message, language)
    };
  }

  if (msgLower.includes('contact') || msgLower.includes('support')) {
    const contactMsg = language === 'en'
      ? `You can reach us at:\nЁЯУЮ Phone: ${t.contact.phone}\nЁЯУз Email: ${t.contact.email}\nЁЯТм WhatsApp: ${t.contact.whatsapp}\nтП░ ${t.contact.hours}`
      : `${t.contact.phone}\n${t.contact.email}\n${t.contact.whatsapp}\n${t.contact.hours}`;
    return {
      message: contactMsg,
      quickReplies: generateQuickReplies(message, language)
    };
  }

  // Default response for unrecognized messages
  const defaultResponses = {
    en: "I'd be happy to help you! I can assist with:\n\nЁЯЫНя╕П Product information\nЁЯУж Shipping and delivery\nЁЯУ▒ Order tracking\nЁЯТ│ Payment options\nЁЯФД Returns and refunds\nЁЯУЮ Contact support\n\nWhat would you like to know more about?",
    hi: "рдореИрдВ рдЖрдкрдХреА рдорджрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реВрдВ! рдореИрдВ рдЗрд╕рдореЗрдВ рд╕рд╣рд╛рдпрддрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ:\n\nЁЯЫНя╕П рдЙрддреНрдкрд╛рдж рдЬрд╛рдирдХрд╛рд░реА\nЁЯУж рд╢рд┐рдкрд┐рдВрдЧ рдФрд░ рдбрд┐рд▓реАрд╡рд░реА\nЁЯУ▒ рдСрд░реНрдбрд░ рдЯреНрд░реИрдХрд┐рдВрдЧ\nЁЯТ│ рднреБрдЧрддрд╛рди рд╡рд┐рдХрд▓реНрдк\nЁЯФД рд░рд┐рдЯрд░реНрди рдФрд░ рд░рд┐рдлрдВрдб\nЁЯУЮ рд╕рд╣рд╛рдпрддрд╛ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВ\n\nрдЖрдк рдХрд┐рд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?",
    ta: "роиро╛ройрпН роЙроЩрпНроХро│рпБроХрпНроХрпБ роЙродро╡ роороХро┐ро┤рпНроЪрпНроЪро┐ропро╛роХ роЗро░рпБроХрпНроХро┐ро▒рпЗройрпН! роиро╛ройрпН роЗро╡ро▒рпНро▒ро┐ро▓рпН роЙродро╡ роорпБроЯро┐ропрпБроорпН:\n\nЁЯЫНя╕П родропро╛ро░ро┐рокрпНрокрпБ родроХро╡ро▓рпН\nЁЯУж ро╖ро┐рокрпНрокро┐роЩрпН рооро▒рпНро▒рпБроорпН роЯрпЖро▓ро┐ро╡ро░ро┐\nЁЯУ▒ роЖро░рпНроЯро░рпН роХрогрпНроХро╛рогро┐рокрпНрокрпБ\nЁЯТ│ рокрогроорпН роЪрпЖро▓рпБродрпНродрпБроорпН ро╡ро┐ро░рпБрокрпНрокроЩрпНроХро│рпН\nЁЯФД родро┐ро░рпБроорпНрокрокрпН рокрпЖро▒рпБродро▓рпН рооро▒рпНро▒рпБроорпН рокрогродрпНродро┐ро░рпБрокрпНрокро┐\nЁЯУЮ роЖродро░ро╡рпИродрпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│рпБроЩрпНроХро│рпН\n\nроирпАроЩрпНроХро│рпН роОродрпИрокрпН рокро▒рпНро▒ро┐ роорпЗро▓рпБроорпН роЕро▒ро┐роп ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│рпН?",
    te: "р░ир▒Зр░ир▒Б р░ор▒Ар░Хр▒Б р░╕р░╣р░╛р░пр░В р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░╕р░Вр░др▒Лр░╖р░┐р░╕р▒Нр░др▒Бр░ир▒Нр░ир░╛р░ир▒Б! р░ир▒Зр░ир▒Б р░╡р▒Ар░Яр░┐р░▓р▒Л р░╕р░╣р░╛р░пр░В р░Ър▒Зр░пр░Чр░▓р░ир▒Б:\n\nЁЯЫНя╕П р░Йр░др▒Нр░кр░др▒Нр░др░┐ р░╕р░ор░╛р░Ър░╛р░░р░В\nЁЯУж р░╖р░┐р░кр▒Нр░кр░┐р░Вр░Чр▒Н р░ор░░р░┐р░пр▒Б р░бр▒Жр░▓р░┐р░╡р░░р▒А\nЁЯУ▒ р░Жр░░р▒Нр░бр░░р▒Н р░Яр▒Нр░░р░╛р░Хр░┐р░Вр░Чр▒Н\nЁЯТ│ р░Ър▒Жр░▓р▒Нр░▓р░┐р░Вр░кр▒Б р░Ор░Вр░кр░┐р░Хр░▓р▒Б\nЁЯФД р░░р░┐р░Яр░░р▒Нр░ир▒Нр░╕р▒Н р░ор░░р░┐р░пр▒Б р░░р▒Ар░лр░Вр░бр▒Нр░╕р▒Н\nЁЯУЮ р░ор░жр▒Нр░жр░др▒Бр░ир▒Б р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░Вр░бр░┐\n\nр░ор▒Ар░░р▒Б р░жр▒Зр░ир░┐ р░Чр▒Бр░░р░┐р░Вр░Ър░┐ р░ор░░р░┐р░Вр░д р░др▒Жр░▓р▒Бр░╕р▒Бр░Хр▒Лр░╡р░╛р░▓р░ир▒Бр░Хр▒Бр░Вр░Яр▒Бр░ир▒Нр░ир░╛р░░р▒Б?",
    kn: "р▓ир▓╛р▓ир│Б р▓ир▓┐р▓ор▓Чр│Ж р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр▓▓р│Б р▓╕р▓Вр▓др│Лр▓╖р▓кр▓бр│Бр▓др│Нр▓др│Зр▓ир│Ж! р▓ир▓╛р▓ир│Б р▓Зр▓╡р│Бр▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр▓мр▓▓р│Нр▓▓р│Ж:\n\nЁЯЫНя╕П р▓Йр▓др│Нр▓кр▓ир│Нр▓и р▓ор▓╛р▓╣р▓┐р▓др▓┐\nЁЯУж р▓╢р▓┐р▓кр│Нр▓кр▓┐р▓Вр▓Чр│Н р▓ор▓др│Нр▓др│Б р▓бр│Жр▓▓р▓┐р▓╡р▓░р▓┐\nЁЯУ▒ р▓Жр▓░р│Нр▓бр▓░р│Н р▓Яр│Нр▓░р│Нр▓пр▓╛р▓Хр▓┐р▓Вр▓Чр│Н\nЁЯТ│ р▓кр▓╛р▓╡р▓др▓┐ р▓Жр▓пр│Нр▓Хр│Жр▓Чр▓│р│Б\nЁЯФД р▓░р▓┐р▓Яр▓░р│Нр▓ир│Нр▓╕р│Н р▓ор▓др│Нр▓др│Б р▓░р│Ар▓лр▓Вр▓бр│Нр▓╕р│Н\nЁЯУЮ р▓мр│Жр▓Вр▓мр▓▓р▓╡р▓ир│Нр▓ир│Б р▓╕р▓Вр▓кр▓░р│Нр▓Хр▓┐р▓╕р▓┐\n\nр▓ир│Ар▓╡р│Б р▓пр▓╛р▓╡р│Бр▓жр▓░ р▓мр▓Чр│Нр▓Чр│Ж р▓╣р│Жр▓Ър│Нр▓Ър│Б р▓др▓┐р▓│р▓┐р▓пр▓▓р│Б р▓мр▓пр▓╕р│Бр▓др│Нр▓др│Ар▓░р▓┐?",
    ml: "р┤ир┤┐р┤Щр╡Нр┤Щр┤│р╡Ж р┤╕р┤╣р┤╛р┤пр┤┐р┤Хр╡Нр┤Хр┤╛р╡╗ р┤Ор┤ир┤┐р┤Хр╡Нр┤Хр╡Н р┤╕р┤ир╡Нр┤др╡Лр┤╖р┤ор╡Бр┤гр╡Нр┤Яр╡Н! р┤Ор┤ир┤┐р┤Хр╡Нр┤Хр╡Н р┤Зр┤╡р┤пр┤┐р╡╜ р┤╕р┤╣р┤╛р┤пр┤┐р┤Хр╡Нр┤Хр┤╛р╡╗ р┤Хр┤┤р┤┐р┤пр╡Бр┤В:\n\nЁЯЫНя╕П р┤Йр╡╜р┤кр╡Нр┤кр┤ир╡Нр┤и р┤╡р┤┐р┤╡р┤░р┤Щр╡Нр┤Щр╡╛\nЁЯУж р┤╖р┤┐р┤кр╡Нр┤кр┤┐р┤Вр┤Чр╡Бр┤В р┤бр╡Жр┤▓р┤┐р┤╡р┤▒р┤┐р┤пр╡Бр┤В\nЁЯУ▒ р┤Ур╡╝р┤бр╡╝ р┤Яр╡Нр┤░р┤╛р┤Хр╡Нр┤Хр┤┐р┤Вр┤Чр╡Н\nЁЯТ│ р┤кр╡Зр┤пр╡Нр┤ор╡Жр┤ир╡Нр┤▒р╡Н р┤Ур┤кр╡Нр┤╖р┤ир╡Бр┤Хр╡╛\nЁЯФД р┤▒р┤┐р┤Яр╡Нр┤Яр╡Зр┤гр╡Бр┤Хр┤│р╡Бр┤В р┤▒р╡Ар┤лр┤гр╡Нр┤Яр╡Бр┤Хр┤│р╡Бр┤В\nЁЯУЮ р┤кр┤┐р┤ир╡Нр┤др╡Бр┤гр┤пр╡Бр┤ор┤╛р┤пр┤┐ р┤мр┤ир╡Нр┤зр┤кр╡Нр┤кр╡Жр┤Яр╡Бр┤Х\n\nр┤ир┤┐р┤Щр╡Нр┤Щр╡╛р┤Хр╡Нр┤Хр╡Н р┤Ор┤ир╡Нр┤др┤╛р┤гр╡Н р┤Хр╡Вр┤Яр╡Бр┤др╡╜ р┤Ер┤▒р┤┐р┤пр╡Зр┤гр╡Нр┤Яр┤др╡Н?",
    mr: "рдореА рддреБрдореНрд╣рд╛рд▓рд╛ рдорджрдд рдХрд░рдгреНрдпрд╛рд╕ рдЖрдирдВрджрд┐рдд рдЖрд╣реЗ! рдореА рдпрд╛рдордзреНрдпреЗ рдорджрдд рдХрд░реВ рд╢рдХрддреЛ:\n\nЁЯЫНя╕П рдЙрддреНрдкрд╛рджрди рдорд╛рд╣рд┐рддреА\nЁЯУж рд╢рд┐рдкрд┐рдВрдЧ рдЖрдгрд┐ рдбрд┐рд▓рд┐рд╡реНрд╣рд░реА\nЁЯУ▒ рдСрд░реНрдбрд░ рдЯреНрд░реЕрдХрд┐рдВрдЧ\nЁЯТ│ рдкреЗрдореЗрдВрдЯ рдкрд░реНрдпрд╛рдп\nЁЯФД рдкрд░рддрд╛рд╡рд╛ рдЖрдгрд┐ рдкрд░рддрд╛рд╡рд╛\nЁЯУЮ рд╕рдорд░реНрдердирд╛рд╢реА рд╕рдВрдкрд░реНрдХ рд╕рд╛рдзрд╛\n\nрддреБрдореНрд╣рд╛рд▓рд╛ рдпрд╛рдмрджреНрджрд▓ рдЕрдзрд┐рдХ рдХрд╛рдп рдЬрд╛рдгреВрди рдШреНрдпрд╛рдпрдЪреЗ рдЖрд╣реЗ?",
    bn: "ржЖржорж┐ ржЖржкржирж╛ржХрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрзЗрж░рзЗ ржЦрзБрж╢рж┐! ржЖржорж┐ ржПрждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐:\n\nЁЯЫНя╕П ржкржгрзНржпрзЗрж░ рждржерзНржп\nЁЯУж рж╢рж┐ржкрж┐ржВ ржПржмржВ ржбрзЗрж▓рж┐ржнрж╛рж░рж┐\nЁЯУ▒ ржЕрж░рзНржбрж╛рж░ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ\nЁЯТ│ ржкрзЗржорзЗржирзНржЯ ржмрж┐ржХрж▓рзНржк\nЁЯФД рж░рж┐ржЯрж╛рж░рзНржи ржПржмржВ рж░рж┐ржлрж╛ржирзНржб\nЁЯУЮ рж╕рж╛ржкрзЛрж░рзНржЯрзЗрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рзБржи\n\nржЖржкржирж┐ ржХрзА рж╕ржорзНржкрж░рзНржХрзЗ ржЖрж░ржУ ржЬрж╛ржирждрзЗ ржЪрж╛ржи?",
    gu: "рк╣рлБркВ ркдркоркирлЗ ркоркжркж ркХрк░рлАркирлЗ ркЦрлБрк╢ ркЫрлБркВ! рк╣рлБркВ ркЖркорк╛ркВ ркоркжркж ркХрк░рлА рк╢ркХрлБркВ ркЫрлБркВ:\n\nЁЯЫНя╕П ркЙркдрлНрккрк╛ркжрки ркорк╛рк╣рк┐ркдрлА\nЁЯУж рк╢рк┐рккрк┐ркВркЧ ркЕркирлЗ ркбрк┐рк▓рк┐рк╡рк░рлА\nЁЯУ▒ ркУрк░рлНркбрк░ ркЯрлНрк░рлЗркХрк┐ркВркЧ\nЁЯТ│ ркЪрлБркХрк╡ркгрлА рк╡рк┐ркХрк▓рлНрккрлЛ\nЁЯФД рк░рк┐ркЯрк░рлНрки ркЕркирлЗ рк░рк┐рклркВркб\nЁЯУЮ рк╕рккрлЛрк░рлНркЯркирлЛ рк╕ркВрккрк░рлНркХ ркХрк░рлЛ\n\nркдркорлЗ рк╢рлБркВ рк╡ркзрлБ ркЬрк╛ркгрк╡рк╛ ркорк╛ркВркЧрлЛ ркЫрлЛ?",
    pa: "риорйИриВ ридрйБри╣ри╛рибрйА риорижриж риХри░рии ри▓риИ риЦрйБри╕ри╝ ри╣ри╛риВ! риорйИриВ риЗри╕ ри╡ри┐рй▒риЪ риорижриж риХри░ ри╕риХрижри╛ ри╣ри╛риВ:\n\nЁЯЫНя╕П риЙридрикри╛риж риЬри╛ригриХри╛ри░рйА\nЁЯУж ри╕ри╝ри┐рикри┐рй░риЧ риЕридрйЗ рибри┐ри▓рйАри╡ри░рйА\nЁЯУ▒ риЖри░рибри░ риЯри░рйИриХри┐рй░риЧ\nЁЯТ│ ринрйБриЧридри╛рии ри╡ри┐риХри▓рик\nЁЯФД ри╡ри╛рикри╕рйА риЕридрйЗ ри░ри┐рилрй░риб\nЁЯУЮ ри╕ри╣ри╛риЗридри╛ риири╛ри▓ ри╕рй░рикри░риХ риХри░рйЛ\n\nридрйБри╕рйАриВ риХри┐ри╕ римри╛ри░рйЗ ри╣рйЛри░ риЬри╛ригриири╛ риЪри╛ри╣рйБрй░рижрйЗ ри╣рйЛ?"
  };
  
  return {
    message: defaultResponses[language] || defaultResponses.en,
    quickReplies: generateQuickReplies(message, language)
  };
}

// ==================== CHATBOT ROUTES ====================

app.post('/api/chatbot/message', async (req, res) => {
  try {
    const { message, userId, language = 'en', conversationHistory = [] } = req.body;
    
    if (!message || typeof message !== 'string' || message.trim() === '') {
      return res.status(400).json({ 
        message: 'Message is required and must be a non-empty string',
        quickReplies: []
      });
    }

    const supportedLanguages = ['en', 'hi', 'ta', 'te', 'kn', 'ml', 'mr', 'bn', 'gu', 'pa', 'es', 'fr', 'de', 'ar'];
    const lang = supportedLanguages.includes(language) ? language : 'en';

    if (!GROQ_API_KEY || GROQ_API_KEY.trim() === '') {
      console.log('тЪая╕П GROQ_API_KEY not configured. Using fallback responses.');
      const fallbackResponse = generateFallbackResponse(message, lang);
      return res.json(fallbackResponse);
    }

    try {
      const systemPrompt = await buildSystemPrompt(userId, lang);

      const messages = [
        ...conversationHistory.map(msg => ({
          role: msg.sender === 'user' ? 'user' : 'assistant',
          content: msg.text
        })),
        { role: 'user', content: message }
      ];

      const aiResponse = await callGroqAPI(messages, systemPrompt);
      const quickReplies = generateQuickReplies(message, lang);

      res.json({
        message: aiResponse,
        quickReplies: quickReplies
      });

    } catch (groqError) {
      console.error('Groq API Error Details:', {
        message: groqError.message,
        response: groqError.response?.data,
        status: groqError.response?.status
      });
      
      console.log('тЪая╕П Groq API failed. Using fallback response.');
      const fallbackResponse = generateFallbackResponse(message, lang);
      return res.json(fallbackResponse);
    }

  } catch (error) {
    console.error('Chatbot endpoint error:', {
      message: error.message,
      stack: error.stack
    });
    
    const errorMessages = {
      en: "I'm having trouble right now. Please try again or contact our support team.",
      hi: "рдореБрдЭреЗ рдЕрднреА рдкрд░реЗрд╢рд╛рдиреА рд╣реЛ рд░рд╣реА рд╣реИред рдХреГрдкрдпрд╛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ рдпрд╛ рд╣рдорд╛рд░реА рд╕рд╣рд╛рдпрддрд╛ рдЯреАрдо рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВред",
      ta: "роОройроХрпНроХрпБ роЗрокрпНрокрпЛродрпБ роЪро┐роХрпНроХро▓рпН роЙро│рпНро│родрпБ. роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН роЕро▓рпНро▓родрпБ роОроЩрпНроХро│рпН роЖродро░ро╡рпБ роХрпБро┤рпБро╡рпИ родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ро╡рпБроорпН.",
      te: "р░ир░╛р░Хр▒Б р░Зр░кр▒Нр░кр▒Бр░бр▒Б р░Зр░мр▒Нр░мр░Вр░жр░┐ р░Йр░Вр░жр░┐. р░жр░пр░Ър▒Зр░╕р░┐ р░ор░│р▒Нр░▓р▒А р░кр▒Нр░░р░пр░др▒Нр░ир░┐р░Вр░Ър░Вр░бр░┐ р░▓р▒Зр░жр░╛ р░ор░╛ р░ор░жр▒Нр░жр░др▒Б р░мр▒Гр░Вр░жр░╛р░ир▒Нр░ир░┐ р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░Вр░бр░┐."
    };
    const lang = req.body.language || 'en';
    res.status(500).json({ 
      message: errorMessages[lang] || errorMessages.en,
      quickReplies: []
    });
  }
});

// Get supported languages
app.get('/api/chatbot/languages', async (req, res) => {
  try {
    res.json({
      languages: [
        // Indian Languages
        { code: 'en', name: 'English', nativeName: 'English', flag: 'ЁЯЗмЁЯЗз' },
        { code: 'hi', name: 'Hindi', nativeName: 'рд╣рд┐рдВрджреА', flag: 'ЁЯЗоЁЯЗ│' },
        { code: 'ta', name: 'Tamil', nativeName: 'родрооро┐ро┤рпН', flag: 'ЁЯЗоЁЯЗ│' },
        { code: 'te', name: 'Telugu', nativeName: 'р░др▒Жр░▓р▒Бр░Чр▒Б', flag: 'ЁЯЗоЁЯЗ│' },
        { code: 'kn', name: 'Kannada', nativeName: 'р▓Хр▓ир│Нр▓ир▓б', flag: 'ЁЯЗоЁЯЗ│' },
        { code: 'ml', name: 'Malayalam', nativeName: 'р┤ор┤▓р┤пр┤╛р┤│р┤В', flag: 'ЁЯЗоЁЯЗ│' },
        { code: 'mr', name: 'Marathi', nativeName: 'рдорд░рд╛рдареА', flag: 'ЁЯЗоЁЯЗ│' },
        { code: 'bn', name: 'Bengali', nativeName: 'ржмрж╛ржВрж▓рж╛', flag: 'ЁЯЗоЁЯЗ│' },
        { code: 'gu', name: 'Gujarati', nativeName: 'ркЧрлБркЬрк░рк╛ркдрлА', flag: 'ЁЯЗоЁЯЗ│' },
        { code: 'pa', name: 'Punjabi', nativeName: 'рикрй░риЬри╛римрйА', flag: 'ЁЯЗоЁЯЗ│' },
        // International Languages
        { code: 'es', name: 'Spanish', nativeName: 'Espa├▒ol', flag: 'ЁЯЗкЁЯЗ╕' },
        { code: 'fr', name: 'French', nativeName: 'Fran├зais', flag: 'ЁЯЗлЁЯЗ╖' },
        { code: 'de', name: 'German', nativeName: 'Deutsch', flag: 'ЁЯЗйЁЯЗк' },
        { code: 'ar', name: 'Arabic', nativeName: '╪з┘Д╪╣╪▒╪и┘К╪й', flag: 'ЁЯЗ╕ЁЯЗж' }
      ]
    });
  } catch (error) {
    res.status(500).json({ message: 'Error fetching languages' });
  }
});

// ==================== AUTH ROUTES ====================

app.post('/api/auth/signup', async (req, res) => {
  try {
    const { name, email, password } = req.body;
    const [existing] = await db.select().from(users).where(eq(users.email, email));
    if (existing) return res.status(400).json({ message: 'Email exists' });

    const hashedPassword = await bcrypt.hash(password, 10);
    const [newUser] = await db.insert(users).values({ name, email, password: hashedPassword }).returning();
    
    const token = jwt.sign({ userId: newUser.id }, JWT_SECRET, { expiresIn: '7d' });
    res.status(201).json({ token, user: { id: newUser.id, name: newUser.name, email: newUser.email } });
  } catch (error) {
    res.status(500).json({ message: 'Signup error' });
  }
});

app.post('/api/auth/login', async (req, res) => {
  try {
    const { email, password } = req.body;
    const [user] = await db.select().from(users).where(eq(users.email, email));
    if (!user || !(await bcrypt.compare(password, user.password))) {
      return res.status(401).json({ message: 'Invalid credentials' });
    }
    const token = jwt.sign({ userId: user.id }, JWT_SECRET, { expiresIn: '7d' });
    res.json({ token, user: { id: user.id, name: user.name, email: user.email } });
  } catch (error) {
    res.status(500).json({ message: 'Login error' });
  }
});

app.get('/api/auth/me', authenticateToken, async (req, res) => {
  try {
    res.json({ 
      user: { 
        id: req.user.id, 
        name: req.user.name, 
        email: req.user.email 
      } 
    });
  } catch (error) {
    res.status(500).json({ message: 'Error fetching user' });
  }
});

// ==================== CART ROUTES ====================

app.get('/api/cart', authenticateToken, async (req, res) => {
  try {
    const items = await db.select().from(cartItems).where(eq(cartItems.userId, req.user.id));
    res.json({ items });
  } catch (error) {
    res.status(500).json({ message: 'Cart fetch error' });
  }
});

app.post('/api/cart', authenticateToken, async (req, res) => {
  try {
    const { items } = req.body;
    await db.delete(cartItems).where(eq(cartItems.userId, req.user.id));
    if (items?.length > 0) {
      await db.insert(cartItems).values(items.map(i => ({ ...i, userId: req.user.id, productId: i.id })));
    }
    res.json({ message: 'Cart synced' });
  } catch (error) {
    res.status(500).json({ message: 'Cart update error' });
  }
});

// ==================== ORDER ROUTES ====================

app.post('/api/orders', authenticateToken, async (req, res) => {
  try {
    const { items, shippingAddress, paymentMethod, totalAmount } = req.body;
    const [order] = await db.insert(orders).values({
      userId: req.user.id,
      items,
      shippingAddress,
      paymentMethod: paymentMethod || 'cod',
      totalAmount: totalAmount.toString()
    }).returning();
    
    await db.delete(cartItems).where(eq(cartItems.userId, req.user.id));
    res.status(201).json({ message: 'Order placed', order });
  } catch (error) {
    res.status(500).json({ message: 'Order error' });
  }
});

app.get('/api/orders', authenticateToken, async (req, res) => {
  try {
    const userOrders = await db.select()
      .from(orders)
      .where(eq(orders.userId, req.user.id))
      .orderBy(desc(orders.createdAt));
    res.json({ orders: userOrders });
  } catch (error) {
    res.status(500).json({ message: 'Error fetching orders' });
  }
});

// ==================== HEALTH & START ====================

app.get('/api/health', async (req, res) => {
  try {
    const result = await sql`SELECT now()`;
    res.json({ status: 'OK', time: result[0].now });
  } catch (error) {
    res.status(500).json({ status: 'ERROR', message: error.message });
  }
});

app.listen(PORT, () => {
  console.log(`ЁЯЪА Server running on port ${PORT}`);
  console.log(`ЁЯУЭ GROQ_API_KEY configured: ${GROQ_API_KEY ? 'YES тЬЕ' : 'NO тЭМ (using fallback responses)'}`);
  console.log(`ЁЯМН Supported languages: 14 (9 Indian + 5 International)`);
});

module.exports = app;